{
    "componentChunkName": "component---src-templates-index-js",
    "path": "/",
    "result": {"pageContext":{"pageAllCount":91,"group":[{"node":{"id":"6b14bd4d-1cc8-57ef-b81a-bdbe405e6d96","html":"<h2>1.0 - 2017-02-25</h2>\n<blockquote>\n<p>在这里记录下学习前端的过程。最近在博客园写自己之前的博客的时候，发现自己不是很善于描述东西，也发现博客园的书写体验没那么好，之前一直想弄一个这样的博客，这就算成型了。<br>\n希望通过这个博客来锻炼自己表达的能力同时起到督促自己目的。</p>\n</blockquote>\n<h2>2.0 - 2021-04-08</h2>\n<p>看到这个文档上次的修改记录已经是三年之前了,个人的博客在三年中有一直保持更新(虽然频率上😢不高).应该在去年建了一个公众号-前端小板凳和掘金账号.\n小板凳的初衷是我能跟大家一起坐在板凳上一起学习进步(我要是在胖下去 小板凳要变成大板凳了➳♥゛扎心),最近重新理了下思路以后小板凳和这个博客会主要以如下的内容进行更新(虽然搞不好哪天就不更了).\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/ad1ae/road.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.39999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQ4y4WTW27bMBBFvfkC/elG0gL96Bby0zU0sRtbUiQ/JFKkxJfEU4iObSmNWwIEyBnO697LFW8rxpj2tNpWUdc1LoDqHFVVkRcFzrnr2/cxl/vqYjw7IsbB/nAiz3M6C6I1PK/XlGVFCOFuosv9lvDNaf3s4dStNuz3e6x1DMNACMMiwbIhWL2v0jvIipL1ek3bR6qjZrPZIISkrhuU1peARZezkWEYIQyRYTwn9D7gncMH6I1HqXYRNHU6xsg4jmnPu12dB7tVcn5ZWXeGXZahdYcNUJZ7mkYyRJCtQgix7FCbyLfHyMNj5MfPiOwhL0q2ux2diXQmIKXAOo/1E2EHXssDjdDkecHLy5bT6cQwjmcMawWfHuDz18iX75FGwzAEvPcJiq63STbWj3Q2opRCa40xPcbYhOkks/GSkAWnERfmcoBWTSwfkmTOmC2J+ICUmACegqfzpL3itSLLdigDeSkTy00jrlqdS+Uv2dwM5yrGRYx1WGsSZrXoF8D/V9hz45R1+inGWpzzyS6k4tfTE1LKNLa19orX3a83d04jZ3nJ8+Y3ou2RsuV4PNI0TQK/ESIRdjfh0hETs3Uj2G53lFX1TwI+GvkP6qVFIVq+nLwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"技术路线\"\n        title=\"技术路线\"\n        src=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/00d43/road.png\"\n        srcset=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/63868/road.png 250w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/0b533/road.png 500w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/00d43/road.png 1000w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/aa440/road.png 1500w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/e8950/road.png 2000w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/ad1ae/road.png 2270w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>前端基础</h3>\n<ol>\n<li><a href=\"https://html.spec.whatwg.org/#toc-browsers\">HTML Standard</a> html标准</li>\n<li><a href=\"https://tc39.es/ecma262/\">javascript标准</a></li>\n<li>网络基础知识</li>\n</ol>\n<h3>前端框架</h3>\n<ol>\n<li>react</li>\n<li>前端状态管理(redux, hook, Mobx)</li>\n<li>next.js</li>\n<li>webpack</li>\n</ol>\n<h3>横向技术</h3>\n<ol>\n<li>跨端(端)技术</li>\n</ol>\n<ul>\n<li>跨端技术 flutter taro</li>\n<li>端技术 Android/ IOS</li>\n</ul>\n<ol start=\"2\">\n<li>服务端技术</li>\n</ol>\n<ul>\n<li>node.js egg.js(如何构建一个高可用的服务端系统)</li>\n<li>go</li>\n</ul>\n<h3>解决方案</h3>\n<ol>\n<li>微前端方案</li>\n<li>离线化(预加载)</li>\n<li>拆包</li>\n<li>骨架</li>\n<li>服务端渲染</li>\n</ol>\n<h3>工程化</h3>\n<ol>\n<li>服务部署运维(docker Kubernetes)</li>\n</ol>\n<h3>思考(做事方式)</h3>\n<p>这里会记录一些思考,会随着自己的认知定期修改这部分内容.一些内容会沉淀成记录\n要从把事做完到做好到做广.</p>\n<ol>\n<li>数据 => 业务</li>\n<li>做好监控(用户行为 异常监控)</li>\n<li>如何能做到业务技术两手抓</li>\n<li>探索推进业务的方式(往前看 多聊, 视角的切换(长期短期 用户视角))</li>\n<li>先想好在做 别急 这点不容易</li>\n</ol>\n<p>希望2.0版本能把我们的知识串成一个网,一起把事做好.希望事情会因你不同.</p>\n<h2>3.0-2022-04-12</h2>\n<p>距离上次更新这个文档差不多刚好一年的时间，博客的内容也大致按照之前2.0版本的内容在更新(万幸没有断更)。3.0版本的内容会在2.0的基础上更加<strong>系统化</strong>。这里对3.0版本的内容做下diff:</p>\n<ul>\n<li>形式上会结合做过的事或者看过的内容，结合自己的想法总结和输出(虽然有些想法比较基础和简单)，也是想在自己这边能把一些东西揉碎想明白的一种尝试，现在主要有以下两种方式:\n<ol>\n<li><a href=\"https://icantunderstand.github.io/blog/%E5%89%8D%E7%AB%AF%E5%BF%AB%E6%8A%A5/\"><strong>前端快报</strong></a>收录近期阅读的前端技术类文章，月维度更新</li>\n<li><a href=\"https://icantunderstand.github.io/blog/%E8%AF%BB%E4%B9%A6%E7%9B%AE%E5%BD%95/\"><strong>读书目录</strong></a>收录自己读过的书和阅读过程中的一些想法，采取了打分推荐的方式(有个人喜好)，根据读书进度实时更新。</li>\n</ol>\n</li>\n</ul>","fields":{"readingTime":{"text":"4 min read"}},"frontmatter":{"title":"初心","date":"2019-07-10","tags":"思考","path":"/my-heart","top":true,"summary":null}}},{"node":{"id":"efb8a435-cea5-59e6-bc37-3b2058087a28","html":"<ul>\n<li>要有刨根问底的精神</li>\n<li>多思考这件事为什么是这样</li>\n<li>提取事物相同的模式 从更上层或者多角度去看相似的问题</li>\n<li>有深度的刻意练习才能产生提高</li>\n<li>做技术 可以从技术角度去产生技术方案也可以从用户产品视角去思考技术 不要把这两个孤立开来</li>\n</ul>\n<h2>跨端的本质</h2>\n<p>一句话概括: 如何技术手段以较低成本和较高的稳定性实现端业务的快速发展\n在讨论具体的跨端方案时，先看几个在选择跨端方案的场景</p>\n<table>\n<thead>\n<tr>\n<th>目标</th>\n<th>考量点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>动态化</td>\n<td>1. 包体积问题是一个app发展到一定阶段必定要考量的问题，也是一些大厂在内部推动跨端方案的一个核心诉求 2. 业务动态化诉求(快速迭代/动态更新)</td>\n</tr>\n<tr>\n<td>人效</td>\n<td>跨端方案可以实现一次开发多端使用，提升人效 1. 原生能力需要端接入或者端技术能力，长期需要多端技术能力 2. 多端展现存在差异，需要开发中磨平 3. 通常说跨端都从h5(动态化技术)的视角切入，h5和native不是非此即彼的关系，事是大家的</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>技术方案存在性能瓶颈，通过其他技术方案可以解决性能问题，优化业务体验</td>\n</tr>\n<tr>\n<td>技术基建能力</td>\n<td>1. 技术储备 2. 业务在不同技术方案下探索(小程序)</td>\n</tr>\n</tbody>\n</table>\n<h2>react理念(特点)</h2>\n<ul>\n<li>\n<p>数据驱动视图，MVVM框架</p>\n</li>\n<li>\n<p>虚拟Dom，可以实现多平台renderer和渲染优化</p>\n</li>\n<li>\n<p>组件化思维，更好的抽象/组合/代码复用</p>\n</li>\n<li>\n<p>函数式编程</p>\n</li>\n</ul>","fields":{"readingTime":{"text":"3 min read"}},"frontmatter":{"title":"想法片段总结","date":"2020-12-21","tags":"思考","path":"/idea","top":true,"summary":null}}},{"node":{"id":"ba292735-2f0e-54e1-8d03-d6181419a3c5","html":"<p>最近在梳理B端场景一些技术点，重新又思考了下B端场景和C端场景在技术侧一些差异点。抛开场景说技术都是耍流氓。自己刚好有B端和C端广告业务的背景经历，下面就结合广告业务来梳理下自己对B端和C端前端技术侧差异的一点理解。</p>\n<h2>面向用户的差异</h2>\n<p>面向用户的差异决定着业务具体的展现形式区别。</p>\n<ul>\n<li>在C端的广告场景中，有可能通过互动玩法、多端分发、样式和场景的迭代来吸引用户对广告的关注，达到广告主的推广诉求。从这点上看在C端的广告场景中就涉及到跨端技术、样式动态化、互动玩法沉淀等。</li>\n<li>在B端的广告场景中, 面向的是广告主，广告主的诉求就是如何高效快速的创建并且优化广告进行持续投放，广告投放的好更多在冰山水下的部分，比如引擎算法、策略、流量分发等，这里面需要结合整个平台的用户体验进行考量。在冰山的水面部分，就涉及到广告的搭建而不同的广告会有不同的展示形式。也就意味着平台需要储备广告的同构渲染技术、低代码方案、配置化能力等</li>\n</ul>\n<h2>面向端的渲染技术差异</h2>\n<h3>B端特点</h3>\n<ul>\n<li>在B端业务中主要的渲染场景是浏览器，容器相对单一。在业务编写的时候只需要关注主流PC浏览器的差异即可。</li>\n<li>广告同构渲染技术，一个广告的搭建需要在B端给用户及时页面展示，同时在C端场景结合具体的容器渲染对应的广告。这里面有可能涉及到一码多投(编译成不同容器的代码)、SSR渲染等</li>\n<li>B端主要是PC浏览器场景，资源的编译发布流程相对简单，静态资源多通过部署到CDN平台即可。可能会涉及到SPA/MPA/SEO/SSR等技术方案</li>\n</ul>\n<h3>C端特点</h3>\n<ul>\n<li>在C端业务中，主要涉及到端容器的不同。比如安卓IOS容器、特定端不同版本容器、用户手机浏览器、微信小程序等，需要处理端差异并且涉及到的技术挑战也更多</li>\n<li>C端的发布场景涉及到多容器，就涉及到编译过程的多版本构建和分发并且由于C端对用户的触达诉求高，就涉及到端的动态下发，容器的预渲染技术等。</li>\n</ul>\n<h2>面向业务的复杂度差异</h2>\n<h3>B端特点</h3>\n<p>B端业务主要在于流程的完善，以一个普通的广告为例\n* 在广告创建阶段有投前工具和广告预览能力\n* 在投中阶段有广告数据展示、相关操作、投中工具等\n* 在投后阶段有数据报表等\n从上面的分析中，可以分阶段梳理一些技术点，</p>\n<ul>\n<li>动态化表单(<a href=\"https://github.com/rjsf-team/react-jsonschema-form\">react-jsonschema-form</a>, <a href=\"https://formilyjs.org/zh-CN\">Formily</a>)、配置化列表(<a href=\"https://pro.ant.design/zh-CN/\">ANT DESIGN PRO</a>), 配置化报表能力。主要为了解决迭代的效率问题</li>\n<li>状态管理工具比如<a href=\"https://mobx.js.org/README.html\">mobx</a>,<a href=\"https://github.com/reduxjs/redux-toolkit\">redux-toolkit</a>,<a href=\"https://recoiljs.org/zh-hans/\">recoil</a>,在相对复杂的场景需要考虑状态管理库对页面性能的影响和内存占用等</li>\n<li>B端在项目复杂度治理上有可能涉及到monorepo、微前端方案等</li>\n<li>数据请求库会使用一些功能相对较多的请求方案比如<a href=\"https://github.com/TanStack/query\">react-query</a></li>\n</ul>\n<h3>C端特点</h3>\n<p>C端业务的复杂度在于变化，同样的广告有可能会有不同的样式或者不同的玩法，不像B端业务相对在发展路径上是有一定预期的。主要涉及到的一些技术点</p>\n<ul>\n<li>动效(动画)等能力储备</li>\n<li>多端环境差异的磨平，比如胶水层bridge方法的封装、编译层功能的优化</li>\n<li>轻量级的状态管理方案，比如React的context API,<a href=\"https://github.com/pmndrs/zustand\">zustand</a>，同时需要做好粒度的空间，减少组件的重复渲染</li>\n</ul>\n<h2>性能考量的差异</h2>\n<p>在C端场景中，以广告为例如果广告加载速度慢或者广告加载失败，就意味这次广告流量的丢失，可能存在的广告收入就丢失了。所以在C端场景在性能考量上要更极致，更细致。</p>\n<ul>\n<li>有不同的动态化技术出现，比如React Native或者其他的编译DSL方案减少中间层直接渲染Native View.</li>\n<li>链路埋点</li>\n<li>页面展示后操作的优化，页面操作可能涉及到与容器通信，需要进行优化</li>\n</ul>\n<p>在B端场景，有可能涉及多个模块、多个资源的加载问题，就需要对项目资源进行划分，做好加载策略。异步资源、动态加载资源拆分、大文件处理等问题。</p>\n<h2>一些共同点</h2>\n<ul>\n<li>项目稳定性 报错的降噪处理、排障流程、CR流程、开发流程规范</li>\n<li>普适的性能优化考量</li>\n</ul>","fields":{"readingTime":{"text":"7 min read"}},"frontmatter":{"title":"对B端C端业务差异从技术侧(前端)上的一点理解","date":"2024-03-30","tags":"思考","path":"/diff-b-and-c","top":null,"summary":null}}},{"node":{"id":"dc29b1ff-1ae0-57c1-9c8f-a7955fcc0360","html":"<h2><a href=\"https://github.com/devongovett/unplugin-parcel-macros\">unplugin-parcel-macros</a></h2>\n<p>parcel的macro宏定义功能可以实现在其他打包工具中的支持了，macros可以定义编译时逻辑，在编译时执行对应的逻辑生成函数或者自定义流程。参考它的一个例子:</p>\n<pre><code>    // 代码内容\n    import regexgen from 'regexgen' with {type: 'macro'};\n\n    const regex = regexgen(['foobar', 'foobaz', 'foozap', 'fooza']);\n    console.log(regex);\n    \n    // 编译结果\n    console.log(/foo(?:zap?|ba[rz])/);  \n</code></pre>\n<p>上面最后的编译结果只在代码中生成一个regexgen生成的正则表达式，剔除了regexgen的内容。可以使用这种宏能力在编译时做一些动态逻辑。</p>\n<h2><a href=\"https://github.com/wasmerio/wasmer\">wasmer</a></h2>\n<p>wasmer是一个WebAssembly的执行容易，可以实现在不同语言环境中执行WebAssembly。</p>\n<h2><a href=\"https://fx.wtf/\">fx</a></h2>\n<p>一个在命令行浏览和处理json数据的库</p>\n<h2><a href=\"https://shopify.github.io/react-native-skia/\">React Native Skia</a></h2>\n<p>React Native 2D动画库. 提供了图表等能力，开箱即用了。</p>\n<h2><a href=\"https://eloquentjavascript.net/\">Eloquent JavaScript Goes Fourth </a></h2>\n<p>JavaScript编程精讲第四版</p>\n<h2><a href=\"https://github.com/wxt-dev/wxt\">wxt</a></h2>\n<p>下一代浏览器扩展插件的编写框架，特性如下</p>\n<ul>\n<li>支持Vue/React/Svelte等语言</li>\n<li>支持HMR</li>\n<li>支持远程代码的引入</li>\n</ul>\n<h2>优化工具</h2>\n<h3><a href=\"https://github.com/webpro/knip\">knip</a></h3>\n<p>可以帮助查找代码中无用的文件或者依赖的库，可以定期对代码仓库进行扫描，治理代码</p>\n<h3><a href=\"https://github.com/aidenybai/million\">million</a></h3>\n<p>一个可以优化React组件性能的库，官网上看可以达到70%的优化，看Star已经15k了，值得关注</p>\n<h3><a href=\"https://github.com/sverweij/dependency-cruiser\">Dependency cruiser</a></h3>\n<p>可以校验和视图化文件依赖的工具</p>\n<ul>\n<li>可以自定义校验规则，对代码的引入进行治理</li>\n<li>视图化代码引入可以生成引入之间的关系，在项目设计上提供一些思路</li>\n</ul>\n<h2>源码解读</h2>\n<h2><a href=\"https://github.com/bvaughn/react-resizable-panels\">react-resizable-panels</a></h2>\n<p>react-resizable-panels是一个实现可伸缩容器的库，简单用法如下</p>\n<pre><code>    &#x3C;PanelGroup direction=\"horizontal\">\n            &#x3C;Panel defaultSize={30} minSize={20} style={{ background: 'blue', height: '200px' }} >\n                    left\n            &#x3C;/Panel>\n            &#x3C;PanelResizeHandle />\n            &#x3C;Panel minSize={30} style={{ background: 'red', height: '200px' }} >\n                    middle\n            &#x3C;/Panel>\n            &#x3C;PanelResizeHandle />\n            &#x3C;Panel defaultSize={30} minSize={20}  style={{ background: 'green', height: '200px' }}>\n                    right\n            &#x3C;/Panel>\n    &#x3C;/PanelGroup>\n</code></pre>\n<ul>\n<li>PanelGroup 通过PanelGroup包裹需要伸缩的容器</li>\n<li>Panel 需要伸缩的容器</li>\n<li>PanelResizeHandle 容器件控制伸缩的组件</li>\n</ul>\n<p>现在从这三个组件开始梳理react-resizable-panels如何实现容器的伸缩功能的</p>\n<h3>Panel</h3>\n<pre><code>    // panelDataRef 存在了当前Panel的id和在暴露出来的一些回调函数(onResize/onCollapse等)\n    const style = getPanelStyle(panelDataRef.current, defaultSize);\n    return createElement(Type, {\n            ...rest,\n            children,\n            className: classNameFromProps,\n            id: idFromProps,\n            style: {\n            // 属性合并逻辑  styleFromProps在这里会应用上 比如设置最大宽度最小宽度等\n            ...style,\n            ...styleFromProps,\n            },\n            // CSS selectors\n            \"data-panel\": \"\",\n            \"data-panel-collapsible\": collapsible || undefined,\n            \"data-panel-group-id\": groupId,\n            \"data-panel-id\": panelId,\n            \"data-panel-size\": parseFloat(\"\" + style.flexGrow).toFixed(1),\n    });\n</code></pre>\n<p>panel整体上是通过context上的getPanelStyle方法来确定样式，并且有相应的通知变更能力</p>\n<h3>PanelGroup</h3>\n<pre><code>    const style: CSSProperties = {\n            display: \"flex\",\n            // PanelGroup是一个flex容器，在子容器变化的时候，通过Context上的getPanelStyle设置子\n            // 容器的flex-basic \n            flexDirection: direction === \"horizontal\" ? \"row\" : \"column\",\n            height: \"100%\",\n            overflow: \"hidden\",\n            width: \"100%\",\n    };\n    return createElement(\n            PanelGroupContext.Provider,\n            //  将全局的方法通过Context的方式共享，包括Panel,ResizeHandle的注册逻辑和变更通知接口\n            { value: context },\n            createElement(Type, {\n            ...rest,\n            children,\n            className: classNameFromProps,\n            id: idFromProps,\n            ref: panelGroupElementRef,\n            style: {\n                    // style样式合并\n                    ...style,\n                    ...styleFromProps,\n            },\n            // CSS selectors\n            \"data-panel-group\": \"\",\n            \"data-panel-group-direction\": direction,\n            \"data-panel-group-id\": groupId,\n            })\n    );\n</code></pre>\n<h3>PanelResizeHandle</h3>\n<p>PanelResizeHandle主要实现了容器大小的改变逻辑，主要有相应事件的订阅、通知变更</p>\n<p>在PanelResizeHandle里面通过registerResizeHandle注册相应事件的监听函数。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/acb387c34128206dfc3a471c26fd33d2/cd78c/registerHandler.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADrklEQVQ4y22UyZKjRhRFa+vSUJIYEshkSAYBAoGEBBpqcHVUh73y/3/OcSBVud12L068TcbJjHj35oPnebRNwfWyZxha8k2DzmvWmxpPKjylkEGI9EPGs9JzPqfAFSa2ZSI+sS2DB9d1UZ5HXu7ozu/sn/8g210IsxK5bgnqgai5Em4vqHRDoFNUWhHq8QIHwxSYlo1hWCjXHoUeSgrcKMcLamw/59FUTEYMyWTl8rgccZiMrASTpc1kcWe6sJgtTCZPBo6wvoQOKxnxaPlMLZ+ZHTAbp6WYmZKpIZkZHjPDZWY4zAzBfGQlmC9t5stRauDehS6u5+KkBeG2QhYlelcTbUvCbYlfFf9cMLckT7a8SadL+8Zsad2E06d/Cf0gIN6/oqojuv+OPv2JKlp0eyEdPgj37wTVCV0dyA/PqDhnYTqYQrI0xecLTVxh8+AIQei7VPsdUV5iZw325oWlX2DaklQnKBkiHB8pA6RURGFIkaakWiNcl+l8ecOxDR5UGKN0gcjP2NmB9a4na483iu5EXHekzZFos0dmNXaYs5QpCy9h4SasvBRTJqzcGD9KeVCBJitr0u4NO+1ImoF4e0LXPel2FHXEVUeQ73F0heXnrOQa079jyAxTpqy85C4cjjnb7kDQPhP3V5xyQNYDfnMi3J2I+zNJfyZoB1TdE7Y90a7HK3qWQYtIOmy9w0sPZFXPw7iQSKcUzRtxdWZzeuH47Tv7tzHkL2xPJ/q3V9rTgKNTVirGUJqVq3myQ5ZiJGBh+/h+eN+ysAycbI/ffRAePlDNC151xQrzW/bm5j2H09VXXKwbs8/tzhfGj6V4nsSxLUR+QF//wt+9Y/jre5i/gv0VbtNjbrrMDefOT8H+jM1YdCFs3KTFTPas4hZTN0xN/1a/UXavoHer4f2V4l67T9lPwR6FjiNuW5KRRucJcZkSF2uyOifKEuIiJUxikjIlKZPbzLc5jvJvXf6lcOnFtMOF8+/faLqO/vmV8/sHl/fvnN6+0Q0Dx8uVw/MbddNyOO5YlwWTJ5OnUbj4hbDa7+mGjva4Y3g90b9c2A+HG7t+x+F6ZFNtyLIUHUVIFfzo8n+FhpcRlQeioiXMG5K6p+iuZM2JrD6Qlg1Z3RFnOWme46kAU3j//xxGoW1bhNmWvN2jspJ4s0WXG1ScofMCW2l+Wzg8LgWP4184RmclmP1qKWMOA+UQFhVhUeOvN+iyRhcVMl4TZgVOkDAd/0Nz5B6b2ShciZ+EnmPxN/zpIA2n9hGBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"注册Handler\"\n        title=\"注册Handler\"\n        src=\"/blog/static/acb387c34128206dfc3a471c26fd33d2/00d43/registerHandler.png\"\n        srcset=\"/blog/static/acb387c34128206dfc3a471c26fd33d2/63868/registerHandler.png 250w,\n/blog/static/acb387c34128206dfc3a471c26fd33d2/0b533/registerHandler.png 500w,\n/blog/static/acb387c34128206dfc3a471c26fd33d2/00d43/registerHandler.png 1000w,\n/blog/static/acb387c34128206dfc3a471c26fd33d2/cd78c/registerHandler.png 1236w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n在registerResizeHandle内部主要通过Set结构管理ResizeHandle相关的数据(回调函数等)并且完成在body上事件的绑定与移除。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/8d8a245aa834cc2a206f72e242d48ee1/d9b5d/registerInner.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134.39999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE6UlEQVRIx3XVWXPiRhSGYS5nAQEC7a0V7RsCxG4Mgz2TcSoXmeT//5Y3hbDjVDK5eKq7VKqvTp9utXplXBH7CW6YExQtXrpgFkU0i4xinrFqK7J0RtNkHd8zGAwGDIdDJEn6j55wPKrtiebwhXy1pT5fCKsap0hw6xzF0F9fHiIN7/4v7O/AfLkjqVc4QYgVB4gixpsXWL7H4NNnpMEAqT9g0O93o/Ra4c/0hOuTNmuqzQOL41M3D7IcO4vwmxKRRp2u4irr5rqwump+GmjbguWqpChS5k1B2zYURUJexGR5jDXz8ZoSO0/w5mU3F2mMlYTogffeDuneht6+9YhDHddV8W6cKZ6r4DpTfFdFU2XU6RhFHnY0ZYx+o8odbTJ6Nez0jg8t7uJEvHsk3p5JTt9Ijk/Exyei/QXDb9CCBSI/IPIdU69CtrM78SZlIhImVkLPTVu87R/oxRVv+yfe4Qf+6XeCxz8Izj/wV1fi0wvF9Qf57gUjbBnZBbJTIts3BbKdI4u8C+8JYeKXa/L1kWJ3ISobTN/tiDDA8H1kJ2Co2wzGGpKsMZAVBuNXoymD0QRpJCMNZXqGYRBWK3bXF5rNEdtxUSZTVEXpRkVRGUxMPssm/anJYGIwmOh3XbiGNFaRxgrSePoaWC44XK5sz0/sL09sThfSLMVzBUIIJEXQn1pd8Hug9vNAIWzioqbdrqiXDe2uZbleUs4r5suatCy6wMEtcGoiTQ2kqY70WuWtBZL8j0Df9ZiYIR8mFp86go9jkw8j/W6o8mms82mkdT6OVD6PFfqjCf3hlL4k05fGXS/7wwk923GY+jVjJ0WJFshOiubniHT5Llkg4gZjVuBFMXaQovgF2qy6Cyp0w8P2fHqzKCY7/Eq8eSI7/Ua6/0a+f6Z8eCFrDyyOV8LNL8w2XwnaJ4rjM27a4Cwu2PURv1gR5C0TxULRTXqe72IXNVG7xJ835Mcts2WDU5SEixI3i5nYIUPNZ2QESLqPpJgMVevez/GUkay8L9n1fazFBW/ziLu+EOy/YpR7zPoRqz6hhEvyZk5UbbCKI4YT0R+rDOQ3Wnce/96UIHCJ5g3VYUW0qCl3S+woY6IHSIrVuR2Z/tuR6XbZuO/yz45NGHrk6xXlfkV9WDE/rsiWc6ZGxMexcTfSOx+GGh9vuz5S6b9V9+9A33NxwzleViOqBU69xkznmEFMWJTd3RjmJX6SE+UFSVngRzGa6jOcGPflvwWObgfbsigWDyz3TxSbC+X2SrE+s3q4cHj+zv505HzZsT1saR/OHK7P7K6/UK2OpM2O2wWtqBqqpnd6hqHjZE13MSSLHfnmTLY+EdYb0u2VqNmRFBVtW9Es5ySrB8LmiOcHWEJg6DqaqnZUVaV3e6iaDqYl0A0T4zbqBqZlIRwHy3axbAfHcbFtG8uysC0DUzjd+6btYggb3XK4fcY90zAIypZm/4Vyc2Jx/pVqtaE9Xdl++c7u8czmy3fmx2eW55fu77g7PXSVp/uvJKsT2ebcrUjYDr2ukiBhluQEcU6YlvhRxizO8MOYJA5wZzFOVOCEGW5SYYc5wrZxoryrVAiru5UURaFnmBZRmrJdV9RVSl2nNPOUMEkRjoumaujajdrRVOVO097HN7p+r9D2Z8TxjCDwCAKf2czHcb170w2jo7/Rb/T/eAv9C0C66RRXfrMBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"注册细节\"\n        title=\"注册细节\"\n        src=\"/blog/static/8d8a245aa834cc2a206f72e242d48ee1/00d43/registerInner.png\"\n        srcset=\"/blog/static/8d8a245aa834cc2a206f72e242d48ee1/63868/registerInner.png 250w,\n/blog/static/8d8a245aa834cc2a206f72e242d48ee1/0b533/registerInner.png 500w,\n/blog/static/8d8a245aa834cc2a206f72e242d48ee1/00d43/registerInner.png 1000w,\n/blog/static/8d8a245aa834cc2a206f72e242d48ee1/d9b5d/registerInner.png 1224w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/9c155e11644fbd12dd77fc212abb36b0/985a9/listener.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEB0lEQVQ4y1WU6XLaShBG/QQx2EZoQ/uOVgTaEAJMYidOqu77P825pbGd5cdXMzUzOvq6p6fvwijADUM0y2e6nnl5e+Py9Rsvbz9JsxBNXSErMpqmoigyqqoiyzKKoqB9zOe1z/U7y7UwXY+42jJ+OzJcBrrLken1xH7YEiYWtm+QVCGW66BqG1R9w1pWkBUFSZKE1us1q9WKO13XcOOMor+S7vYk3TNxUZAUFcN5oh0ntlVHlFf4SU6QltjBFknRWa0VHh8fhZbLJff39zNQZyVJ6KaDYeiYjotp6piWheV4mLaN7boiPFVes5Yk1I8UaKoiRlVVfkPvxEHTJW4vHPY55+nAOO45HHL6vqQuA6rIo80T6m3ENgmZpobjsaYfdhyPO5LYYbFY/gtM+hvNIed8acXhti0Zhpp9FXFII7oioYgCsizmfG7oukpomvbkmS8cLhaLv4DdjbYpuFxaTqc9XVsKcLOLadKYvtxSRD5lueV67ei6kmk6CCWxy3L58MehZnls+6/C4eXDYdMUYqyKgCoOaPKYLPSFwxnS95WIYv55nvo8PMw5XLxfiqJsWCsqkrRivZaEPstBkp5EOUgfmj/83FutnpCVtTj/8PDhcAaajo/tRziOSRi6BIGN65p4noVtGLiGjqWraJpCFLmEgYPjmgS+I279/n7xB7jZ6MTlgaKb2NUp41iL/NR1StsWZFFEEbjsEp8scIkjj2GoaJpc5Lwqt2w0ncVy+QncYAcxXpziuwZp4hKFtpjPybaNDY6uEtkGpq7i+zZZFgqnSeLjOrZw90/ImiSjWQGbsGATlhjxDi3IkZ2E9cZhbXo8yRrmxmS5eOTLl3sR5ue4/BuozUBFI8tq6vHMYfpGc3mhOt4Isx1uEONGKV4Y4zkmtqWjKop4LcrcGOa5eDEaT09P7w4fnx4Jg4Bueub49Y3h+TvnH/9xevnFME28vr1yPN/oLs9UdUl56Knagbo/kRQ73DDBcT1RJXf6xhBlYdk2cV6zLXYkeUG674migOrQcRiO1N1I1Y54no8XhPizwgjX87FtB9u234Eb4wNoWYR+QJ5nZLs92zQm3fqYholhmKJZGIaBaZpinDVfqLExfq+L9mVY+m+gPwPriuZ0YLjs2R0ywtAnDAN81yX0PQLfw3NdfN8T60Hgv8v3Rdd6b18rCcsy8aOYdPjGOPX8+HFmPDVMU8s0djR5zrEuGPclVZrQ93teXk5i/3rtmcYeeS2/A+dnZJkmQZRQnH9yvU38+nnheum43QYu54GhKrn1NWNdUlcFr98nXl9PPF8HXl8nTjNQVv52aIlEZ92FYRq5PI+0Q0fb1Rz2JXkc0xQp1XbObUzX7WjbHft9Sd/XFEUmOvj/TthkPZ36xfMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"listener\"\n        title=\"listener\"\n        src=\"/blog/static/9c155e11644fbd12dd77fc212abb36b0/00d43/listener.png\"\n        srcset=\"/blog/static/9c155e11644fbd12dd77fc212abb36b0/63868/listener.png 250w,\n/blog/static/9c155e11644fbd12dd77fc212abb36b0/0b533/listener.png 500w,\n/blog/static/9c155e11644fbd12dd77fc212abb36b0/00d43/listener.png 1000w,\n/blog/static/9c155e11644fbd12dd77fc212abb36b0/aa440/listener.png 1500w,\n/blog/static/9c155e11644fbd12dd77fc212abb36b0/985a9/listener.png 1512w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>在对应时间的处理逻辑中，以处理mousemove的handlePointerMove为例\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/ea03d143331b324c92cb0d5317ad27f6/7db30/handlerMove.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC0UlEQVQ4y22UbXOjNhSF/bW7aWwwYF4lIWFhBNjGTrJON51OmjadTf7/73laFLc7nfbDM0cvo4MYnXsXsjaorUOZlqHfcnce2I+WL/cDp2PLfjqwcx3GNdhDRzNY+r6mzFPidfAfFlVZItoDqT6wUS2p6shEw3h3pjsc6KcT7njEjiNuOtIOI814j2hGwqRkGWWs4oxVlHq8YVE15PZENVyoxgvy8ERc9dymms+x4FOYe34IMj55Uj6FGTfrnB+jmeyDdcqiLAsq1WC6E9J02OkrzXBGaUu3P6O3OzablM0mI00zr3+TJOm/2XjDkryskHVJ3VTUpkDIHGUqlJnXBHqrMFahjEBbRd1IZF15nfeVrvyeUCWLoijJhaSeD+1qTFejW0W9lV4b9zHf9hptBWYnsb2mtpKmq/1467Q/awfDQlQFqlac70emk+PhsufuYeB01/v55fHA6W6gGy3HL/d0+z1N22A7Q93UCFVQyYKyyj2Lw9Cguz2B6olqR6x71soRaUdievLtQGYcyZwA7ci3PWm9I9MdibBEpSGqDFGpPQuhGp5/eeb9/ZU/Xn/l27ffeP39hfe3F97eXtg//Ex7fkSfnui+vmLvH5GHM7k7kXcnyn7WyZPtjnNsCo5dwzR0HJzl2LdMrmW6aikMSVn7r883CzbSR+U2KriNZ81Yxhk34YabIPnIodrt0KeJonPktmdVGVZCc1vWBKViLRRhKYmVIsgFiayJhCKRilhK0lqxTPKPHM6G251DtntKO5AqR1hYlqlhuVGsMs0yVaz8zUof5s/hlSC7knqzq2FBISxyfELtL5jpEXd5ZvjpBdE/oPaPZM1IJlvWc+Wsc26igpt14c19taznqrkaivmXG4cYHpBtz3YYMW7AuPk1O4JUsoyLD5Li+9iTe3wtx9datlaTpzHhask6DAiD1T9E4dxBQuLoyvr/+N5por+6zZ9uD5vSTuvVKgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"回调出发逻辑\"\n        title=\"回调出发逻辑\"\n        src=\"/blog/static/ea03d143331b324c92cb0d5317ad27f6/00d43/handlerMove.png\"\n        srcset=\"/blog/static/ea03d143331b324c92cb0d5317ad27f6/63868/handlerMove.png 250w,\n/blog/static/ea03d143331b324c92cb0d5317ad27f6/0b533/handlerMove.png 500w,\n/blog/static/ea03d143331b324c92cb0d5317ad27f6/00d43/handlerMove.png 1000w,\n/blog/static/ea03d143331b324c92cb0d5317ad27f6/7db30/handlerMove.png 1494w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>最终走到PanelGroup中的registerResizeHandle方法，根据event动态调整对应panel的样式属性\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/d840d482925b9cf7f391ef254b194d22/7da7d/flexAdjust.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA2klEQVQY0yWOyW6DMAAF+f9/axtERCABb2DjBRuyVDlOFXoYzWGkp1flVNCDODBCMw833CiIWpEnybZY1hApMbKFhRwCayqsMZFC+m9hITpHWTNV8hHRtoxti+g7RNsco16ORDWSnWX1nhw82S8k7zHGofWEVhNGGyalUKPEzo5qnj2XU013+qH+/viLS90wnBumvkF3HbMQ6OsV2Q8YZZDKIqRBSoP5tHFAD7ejVV5OGGlw1uFmi/1gF6z1x7N7LrxfD97PO8/Hg9/Xk23bKWWjHN7JZTvY9zt/LyIlleT0Gg8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flexAdjust\"\n        title=\"flexAdjust\"\n        src=\"/blog/static/d840d482925b9cf7f391ef254b194d22/00d43/flexAdjust.png\"\n        srcset=\"/blog/static/d840d482925b9cf7f391ef254b194d22/63868/flexAdjust.png 250w,\n/blog/static/d840d482925b9cf7f391ef254b194d22/0b533/flexAdjust.png 500w,\n/blog/static/d840d482925b9cf7f391ef254b194d22/00d43/flexAdjust.png 1000w,\n/blog/static/d840d482925b9cf7f391ef254b194d22/aa440/flexAdjust.png 1500w,\n/blog/static/d840d482925b9cf7f391ef254b194d22/e8950/flexAdjust.png 2000w,\n/blog/static/d840d482925b9cf7f391ef254b194d22/7da7d/flexAdjust.png 2120w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","fields":{"readingTime":{"text":"5 min read"}},"frontmatter":{"title":"2024-03-1-前端快报","date":"2024-03-01","tags":"前端快报","path":"/2024-3-1","top":null,"summary":null}}},{"node":{"id":"45baa9fe-a31b-5ed0-a3b1-e94d5fe8548d","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/9b9b17f33335a1c09d1474fc11606434/8f8c6/custom.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3wQH/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAh/9oACAEBAAEFAlT/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAACAwAAAAAAAAAAAAAAAAAAARAhcf/aAAgBAQABPyG4wj//2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRAAAwEBAQAAAAAAAAAAAAAAABEhAUFx/9oACAEBAAE/EMiplXDdaI9P/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"web资源加载\"\n        title=\"web资源加载\"\n        src=\"/blog/static/9b9b17f33335a1c09d1474fc11606434/a2510/custom.jpg\"\n        srcset=\"/blog/static/9b9b17f33335a1c09d1474fc11606434/0479a/custom.jpg 250w,\n/blog/static/9b9b17f33335a1c09d1474fc11606434/41099/custom.jpg 500w,\n/blog/static/9b9b17f33335a1c09d1474fc11606434/a2510/custom.jpg 1000w,\n/blog/static/9b9b17f33335a1c09d1474fc11606434/c58a3/custom.jpg 1500w,\n/blog/static/9b9b17f33335a1c09d1474fc11606434/8f8c6/custom.jpg 1946w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n在加载web资源的时候，资源(数据/js/css/图片等)会主要经历三个阶段:</p>\n<ul>\n<li>服务端组装阶段</li>\n<li>传输阶段</li>\n<li>客户端处理阶段</li>\n</ul>\n<p>在讨论资源加载优化的时候其实在讨论如何能快速的把用户需要的资源尽快的给到用户，这个过程就很像货车运输货物的过程。下面我们就以卡车司机的视角去看货物如何能更好的运输。</p>\n<p>--- 以下是故事视角叙述 ---</p>\n<p>作为一个资深老司机，我驾驶着我的货车已经在这个熟悉的路线上跑了20多年了，虽然货物运输的活一直有，但是运输方对我拉货的要求确越来越多。车多货少，以前是货找车，现在是车找货。在年前去时常合作的老板家拜访(送礼不是)的时候，老板语重心长的跟我说: 跟你合作了这么久，还是你最靠谱，不过我听老王说他家拉货的好像降价了而且还换了大车。咱们合作这么久我是信得过你的，年后咱们在聚聚，聊聊今年咱们怎么干。我拿起来酒倒满了一杯敬了老板，老板笑了笑喝了一口，说: 最近开始养生了。我苦笑。\n开车回家的路上，我就在思考今年的活我应该怎么干。我以往的干活方式可以简化成下面所示:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/57a9c/transfer.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG+AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAACAwAAAAAAAAAAAAAAAAARIQABEP/aAAgBAQABPyF5RDn/2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERUSH/2gAIAQEAAT8QSjr7sI9JaH//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"送货流程\"\n        title=\"送货流程\"\n        src=\"/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/a2510/transfer.jpg\"\n        srcset=\"/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/0479a/transfer.jpg 250w,\n/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/41099/transfer.jpg 500w,\n/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/a2510/transfer.jpg 1000w,\n/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/c58a3/transfer.jpg 1500w,\n/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/3acf0/transfer.jpg 2000w,\n/blog/static/a184fd97b7fb059365e8cbd74d7e7b1c/57a9c/transfer.jpg 2094w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>在配货站等待不同的货物装上车 这个阶段我偶尔也会参与搬货，因为我想快点能出发</li>\n<li>跑长途 是个比较无聊的过程</li>\n<li>卸货站卸货</li>\n</ul>\n<p>想起我在开货车之前干过两年前端工程师，所以我把我想到的今年拉货的方式跟大家求求建议，我会用一些之前还记着的一些词汇来描述我的一些想法，等大家给我出主意，希望过完年我跟老板的聚餐能让老板喝一杯。</p>\n<h2>资源(货物)运输方式</h2>\n<p>说到货物的运输方式，我首先想到的是换掉我的老伙计-陪伴我20多年的老卡车，换一个你们熟悉的说法应该切换下传输协议。比如</p>\n<ul>\n<li>http2 有了多路复用 报头压缩 二进制帧的结构 传输数据上更加高效</li>\n<li>websocket 对二级制支持更好在双向链路上能更好的传输数据</li>\n<li>服务段预渲染技术<a href=\"https://www.patterns.dev/posts/server-side-rendering\">SSR</a>(server-side rendering)/<a href=\"https://www.patterns.dev/posts/static-rendering\">SSG</a>(static site generation)/<a href=\"https://www.patterns.dev/posts/incremental-static-rendering\">ISR</a>（Incremental Static Generation)</li>\n<li>api网关聚合服务 利用内网优势去拼接请求返回给用户</li>\n<li>资源可选下发 对不同浏览器环境下发不同的资源，减少不必要的传输资源</li>\n<li>资源优先级区分 动态加载/图片懒加载/非首屏资源懒(异步)加载等</li>\n</ul>\n<p>上面说的感觉好拗口，还是换成我拉货的话来说，这样跟我一起拉货的车友也能听懂我的意思</p>\n<ul>\n<li>我想在买一辆车，这样能两辆车跑拉货如果每趟我都能赚钱，那么老板也满意，我的钱包也越来越鼓，我需要考虑好这个成本问题</li>\n<li>我是不是可以在开发出一条新的路线，说不定这条路线上回来的时候也能配到货，那么我至少不会空跑，肯定是多赚的</li>\n<li>以前一些货物需要到卸货站进行打包，可以跟老板商量在发车的时候就提前打包好，方便我装货和卸货，也能提高我拉货的效率</li>\n<li>有时候会存在运输方对目的地要货需求的理解不一致的情况，结果拉过去好多货都堆积了，老板钱赚少了，也不愿意给我货款。我可以多跟朋友打听好哪些是紧俏货，把这个信息给老板让老板给我配货</li>\n<li>想要做到区分优先级我就要做到更加详细的要货需求，车里面只拉需要的货，到了那边都卖出来，老板高兴，我也高兴(钱包鼓了当然高兴)</li>\n</ul>\n<h2>资源缓存(货物存储)</h2>\n<p>说到资源缓存，其实在上面的预渲染技术中就可以用到。可以有如下的思路</p>\n<ul>\n<li>服务段资源缓存 服务端动态生成的资源缓存/计算数据缓存</li>\n<li>资源缓存设置 区分不同资源做不同的缓存时间设置</li>\n<li>CDN 多点部署资源/CDN资源预热</li>\n<li>客户端缓存\n<ul>\n<li>通过缓存协商来实现</li>\n<li>客户端动态做数据资源拉取,比如WebView的复用/Webview预加载/<a href=\"https://icantunderstand.github.io/blog/cross-platform-offline\">离线包</a>/<a href=\"https://icantunderstand.github.io/blog/cross-platform-prefetch\">数据预取</a></li>\n<li>api数据资源缓存 非频繁变动且拉取频次高的资源可以做页面周期内的更细粒度的缓存实现</li>\n</ul>\n</li>\n</ul>\n<p>换成我拉货的视角就是:</p>\n<ul>\n<li>提前备货 我车到装货站就装货走人，不用等一天等待货品的进货组装</li>\n<li>紧俏的货就多备一些，多拉一些。要货就有</li>\n<li>跟老板商量在目的地附近在建几个存货处，我先往存货处拉，这样要货的时候也快</li>\n<li>卸货站要是没货的时候，那边有车的话，就跑来这边拉一下货或者进行一些存货，到时候卖库存就行</li>\n</ul>\n<h2>资源体积(货物体积)</h2>\n<p>说到资源体积，思考的是在一次的资源展示中怎么能尽可能少尽可能快的展示给用户信息。这个少和快是一个综合取舍的过程。有的时候我们会放弃文件的大小的考量，只为了达到更好的效果。因为给用户一个频繁抖动的页面不如让用户稍微等待那200 300ms.这里其实也有一些可以想到的点:</p>\n<ul>\n<li>资源加载方式的改变 图片相关资源的内联/webp的使用/react的server component</li>\n<li>兼容性 不在兼容低老版本，减少兼容代码</li>\n<li>tree shaking 防止无用代码的打包</li>\n<li>split chunk 公用代码的提取</li>\n</ul>\n<p>换成我拉货的视角就是:</p>\n<ul>\n<li>一次能多拉货就多拉一些/更换更好的卸货或者装货方式</li>\n<li>人家不要的货咱不拉</li>\n<li>都要的货，咱标记出来，保证都要的货在卸货的时候够用</li>\n</ul>\n<p>--- 结束号---\n之前在<a href=\"https://icantunderstand.github.io/blog/h5-performance\">web性能优化总结</a>中对一些性能优化相关的点做了一次总结，当前文章是在之前的基础上新增了一些最近的思考，在想这个事情的时候刚好想到拉货这件事，所以就通过这种方式做了一次尝试，跟之前<a href=\"https://icantunderstand.github.io/blog/react-render-interpretation\">图说React渲染流程</a>的风格有些像，算是一种尝试，希望通过风趣的方式能把事情讲明白，在尝试风趣化的过程中也加深了自己的理解和思考，不失为一种尝试。</p>","fields":{"readingTime":{"text":"10 min read"}},"frontmatter":{"title":"趣说web资源加载","date":"2024-02-29","tags":"工程化","path":"/load-resource","top":null,"summary":null}}},{"node":{"id":"833ae7d8-40bb-5f61-a2f6-8fd380669c5e","html":"<p>之前看过一篇文章讲代码封装的过程，下面从简述文章的内容开始梳理下自己对代码封装的一点思考.</p>\n<p>--- 以下是之前文章内容简述 ---</p>\n<p>在业务迭代的初期，代码中有一段业务逻辑A,由于A逻辑在项目中使用比较广泛，于是对A逻辑进行了代码逻辑的封装，包括参数的预设等<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 622px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/38aa583bb84ab61a13973cfefd93f77b/5e4ef/initSeal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd8BAsAD/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQABBQIf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAERECAxQYH/2gAIAQEAAT8h3mnSEQiFZ//aAAwDAQACAAMAAAAQQMAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITEgQWHB/9oACAEBAAE/ELPhHW6gldvZmuosZCBFBw//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"初始化封装\"\n        title=\"初始化封装\"\n        src=\"/blog/static/38aa583bb84ab61a13973cfefd93f77b/5e4ef/initSeal.jpg\"\n        srcset=\"/blog/static/38aa583bb84ab61a13973cfefd93f77b/0479a/initSeal.jpg 250w,\n/blog/static/38aa583bb84ab61a13973cfefd93f77b/41099/initSeal.jpg 500w,\n/blog/static/38aa583bb84ab61a13973cfefd93f77b/5e4ef/initSeal.jpg 622w\"\n        sizes=\"(max-width: 622px) 100vw, 622px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n随着业务的发展，又出现了B模块，B模块中几乎可以直接使用A逻辑，但是需要对A逻辑进行一些小小的改动，比如入参的调整、逻辑分支的增加<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 622px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/9661321a8ff56f28c58646f077725bf3/5e4ef/moreSeal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.19999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe+kUkUDAf/EABgQAAIDAAAAAAAAAAAAAAAAAAAQESAh/9oACAEBAAEFAntYP//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABwQAAICAgMAAAAAAAAAAAAAAAAxAREQIUFxgf/aAAgBAQABPyHl49GWieiEiiokof/aAAwDAQACAAMAAAAQUAA8/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBABAAICAwEAAAAAAAAAAAAAAQARMVEhQWHB/9oACAEBAAE/ELPhHGagldvYPDTVvuBRsPO4dB5cpHMIAUE//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"再次封装\"\n        title=\"再次封装\"\n        src=\"/blog/static/9661321a8ff56f28c58646f077725bf3/5e4ef/moreSeal.jpg\"\n        srcset=\"/blog/static/9661321a8ff56f28c58646f077725bf3/0479a/moreSeal.jpg 250w,\n/blog/static/9661321a8ff56f28c58646f077725bf3/41099/moreSeal.jpg 500w,\n/blog/static/9661321a8ff56f28c58646f077725bf3/5e4ef/moreSeal.jpg 622w\"\n        sizes=\"(max-width: 622px) 100vw, 622px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n这种通过修改较小范围代码就能实现功能的方式在实际开发中是很常规的操作，它并没有不好，只是当这种修改变的次数多的时候，最开始封装的逻辑A就变成了‘四不像’，它似乎可以服务于A模块，但是确有些冗余，出现了‘我好像看不懂这段代码’，‘这段代码还是别改了’，‘你改吧 我是改不了’的场景。在多次封装之后，逻辑A容易出现以下的问题</p>\n<ul>\n<li>入参不可控</li>\n<li>逻辑分支复杂，不清晰，修改范围不确定，容易对其他模块产生影响</li>\n<li>复用度逐渐下降，解决方法\n<ol>\n<li>将就不再继续新增逻辑，变成'老大难'问题，总有爆发的一天</li>\n<li>重写相关逻辑，功能回测范围大，影响范围不可控，容易出现漏测等</li>\n</ol>\n</li>\n</ul>\n<p>--- 以下是正文 ---</p>\n<p>提前封装或者过度封装对实际业务的编写都有很大影响，最实际的感受就是这段代码不好写，这个逻辑看不懂。封装的代码逻辑是结果，封装的出发点是因，从出发点去看而不是面向结果的封装似乎更能编写出可维护性的代码。以下是自己对封装的一点思考。</p>\n<h2>降低复杂度</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/3337b53e30bfbce66b906898a0921e4f/0470c/difficulty.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3wAWBQf/xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAEFAh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAXEAADAQAAAAAAAAAAAAAAAAAAAREg/9oACAEBAAE/IU6ilEoTP//aAAwDAQACAAMAAAAQAMcA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAUSAh/9oACAEBAAE/EPsZAzA6ZhFuQtmhzx//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"复杂度\"\n        title=\"复杂度\"\n        src=\"/blog/static/3337b53e30bfbce66b906898a0921e4f/a2510/difficulty.jpg\"\n        srcset=\"/blog/static/3337b53e30bfbce66b906898a0921e4f/0479a/difficulty.jpg 250w,\n/blog/static/3337b53e30bfbce66b906898a0921e4f/41099/difficulty.jpg 500w,\n/blog/static/3337b53e30bfbce66b906898a0921e4f/a2510/difficulty.jpg 1000w,\n/blog/static/3337b53e30bfbce66b906898a0921e4f/0470c/difficulty.jpg 1140w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n通过对业务中分散的相似逻辑提取，就能一定程度上降低项目的复杂度和重复度的问题。在修改相应的业务逻辑时候就相对集中和可控。新增逻辑的修改也能做到应用范围的同步。</p>\n<h2>解耦逻辑</h2>\n<p>在设计模式中需要设计的模块尽量遵循单一职责，但是在实际编写代码的过程中很容易出现模块功能的耦合，比如常见的:</p>\n<ul>\n<li>视图层逻辑与数据层逻辑耦合</li>\n<li>非相关逻辑的入侵 比如视图的逻辑需要感知请求状态的改变做相应的逻辑处理</li>\n</ul>\n<p>通过将相关的逻辑都聚合到模块封装的内部，就能较低其他模块对不相关逻辑的感知，也就做到了解耦。在下面的例子中，通过将A逻辑的关联逻辑都封装进A模块中，降低了功能模块对封装逻辑的感知。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/fcc5771e10b64ca837688f37c6238fe5/a66e6/innerSeal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qEUf//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABcQAAMBAAAAAAAAAAAAAAAAAAAQEQH/2gAIAQEAAT8hquEf/9oADAMBAAIAAwAAABCTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExUUFx/9oACAEBAAE/ENwLb9i0d+QzZiFF2RBMlyjhP//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"内部封装\"\n        title=\"内部封装\"\n        src=\"/blog/static/fcc5771e10b64ca837688f37c6238fe5/a2510/innerSeal.jpg\"\n        srcset=\"/blog/static/fcc5771e10b64ca837688f37c6238fe5/0479a/innerSeal.jpg 250w,\n/blog/static/fcc5771e10b64ca837688f37c6238fe5/41099/innerSeal.jpg 500w,\n/blog/static/fcc5771e10b64ca837688f37c6238fe5/a2510/innerSeal.jpg 1000w,\n/blog/static/fcc5771e10b64ca837688f37c6238fe5/a66e6/innerSeal.jpg 1356w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n相关例子:</p>\n<ul>\n<li>在<a href=\"https://ahooks.js.org/hooks/use-request/index\">ahooks</a>中的useRequest中，就通过对请求状态和数据的操作进行封装，将数据相关操作做到了内聚，减轻了视图层的负担</li>\n<li><a href=\"https://procomponents.ant.design/components/table#protable\">Antd pro components</a>的table</li>\n</ul>\n<h2>分层</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/94914fee415032516c72bd410946a383/a6b65/levleSeal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFhABAQEAAAAAAAAAAAAAAAAAEQAg/9oACAEBAAE/IWc//9oADAMBAAIAAwAAABCwz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAAMAAAAAAAAAAAAAAAERACBBYf/aAAgBAQABPxApk6yhmHx4f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"分层封装\"\n        title=\"分层封装\"\n        src=\"/blog/static/94914fee415032516c72bd410946a383/a2510/levleSeal.jpg\"\n        srcset=\"/blog/static/94914fee415032516c72bd410946a383/0479a/levleSeal.jpg 250w,\n/blog/static/94914fee415032516c72bd410946a383/41099/levleSeal.jpg 500w,\n/blog/static/94914fee415032516c72bd410946a383/a2510/levleSeal.jpg 1000w,\n/blog/static/94914fee415032516c72bd410946a383/c58a3/levleSeal.jpg 1500w,\n/blog/static/94914fee415032516c72bd410946a383/a6b65/levleSeal.jpg 1603w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n在例子中，通过将逻辑A中的相关逻辑提取到上层，分层的方式实现了模块功能的内聚与解耦。在前端的MVC中就通过将相关操作封装成Controller,来完成逻辑的解耦</p>\n<h2>复用(一致性，可控性)</h2>\n<p>从降低复杂度、逻辑结构、分层设计最终的目标是达到封装代码的复用。通过复用能控制代码的一致性，实现修改代码行为的可控。</p>\n<ul>\n<li>在封装的实现上 可以逐渐的从项目内共享 -> 跨项目共享等</li>\n<li>在分发共享逻辑上，有<a href=\"https://zh.wikipedia.org/wiki/Monorepo\">monorepo</a>、<a href=\"https://webpack.js.org/concepts/module-federation/\">模块联邦</a>、<a href=\"https://www.npmjs.com/\">npm包</a>、<a href=\"https://www.amazonaws.cn/knowledge/what-is-micro-frontends/\">微前端</a>等方式.</li>\n</ul>\n<p>-- 写在最后 --</p>\n<p>代码的优化或者设计是应该在理解业务的基础上，从相对大的视角出发来看的。在实际做的时候容易出现缺少全局视角的设计缺失和不完善，也容易出现过度设计，需要仔细去把握这个度量。</p>","fields":{"readingTime":{"text":"6 min read"}},"frontmatter":{"title":"对代码封装的一点思考","date":"2024-02-19","tags":"工程化","path":"/seal-code","top":null,"summary":null}}}],"pathPrefix":"","first":true,"last":false,"index":1,"pageCount":16,"additionalContext":{"pageAllCount":91}}},
    "staticQueryHashes": []}