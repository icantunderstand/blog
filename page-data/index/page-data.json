{"componentChunkName":"component---src-templates-index-js","path":"/","result":{"pageContext":{"pageAllCount":90,"group":[{"node":{"id":"6b14bd4d-1cc8-57ef-b81a-bdbe405e6d96","html":"<h2>1.0 - 2017-02-25</h2>\n<blockquote>\n<p>在这里记录下学习前端的过程。最近在博客园写自己之前的博客的时候，发现自己不是很善于描述东西，也发现博客园的书写体验没那么好，之前一直想弄一个这样的博客，这就算成型了。<br>\n希望通过这个博客来锻炼自己表达的能力同时起到督促自己目的。</p>\n</blockquote>\n<h2>2.0 - 2021-04-08</h2>\n<p>看到这个文档上次的修改记录已经是三年之前了,个人的博客在三年中有一直保持更新(虽然频率上😢不高).应该在去年建了一个公众号-前端小板凳和掘金账号.\n小板凳的初衷是我能跟大家一起坐在板凳上一起学习进步(我要是在胖下去 小板凳要变成大板凳了➳♥゛扎心),最近重新理了下思路以后小板凳和这个博客会主要以如下的内容进行更新(虽然搞不好哪天就不更了).\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/ad1ae/road.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.39999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzUlEQVQ4y4WTW27bMBBFvfkC/elG0gL96Bby0zU0sRtbUiQ/JFKkxJfEU4iObSmNWwIEyBnO697LFW8rxpj2tNpWUdc1LoDqHFVVkRcFzrnr2/cxl/vqYjw7IsbB/nAiz3M6C6I1PK/XlGVFCOFuosv9lvDNaf3s4dStNuz3e6x1DMNACMMiwbIhWL2v0jvIipL1ek3bR6qjZrPZIISkrhuU1peARZezkWEYIQyRYTwn9D7gncMH6I1HqXYRNHU6xsg4jmnPu12dB7tVcn5ZWXeGXZahdYcNUJZ7mkYyRJCtQgix7FCbyLfHyMNj5MfPiOwhL0q2ux2diXQmIKXAOo/1E2EHXssDjdDkecHLy5bT6cQwjmcMawWfHuDz18iX75FGwzAEvPcJiq63STbWj3Q2opRCa40xPcbYhOkks/GSkAWnERfmcoBWTSwfkmTOmC2J+ICUmACegqfzpL3itSLLdigDeSkTy00jrlqdS+Uv2dwM5yrGRYx1WGsSZrXoF8D/V9hz45R1+inGWpzzyS6k4tfTE1LKNLa19orX3a83d04jZ3nJ8+Y3ou2RsuV4PNI0TQK/ESIRdjfh0hETs3Uj2G53lFX1TwI+GvkP6qVFIVq+nLwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"技术路线\"\n        title=\"技术路线\"\n        src=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/00d43/road.png\"\n        srcset=\"/blog/static/23113f1a1ccecdfec79664828aa645e9/63868/road.png 250w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/0b533/road.png 500w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/00d43/road.png 1000w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/aa440/road.png 1500w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/e8950/road.png 2000w,\n/blog/static/23113f1a1ccecdfec79664828aa645e9/ad1ae/road.png 2270w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>前端基础</h3>\n<ol>\n<li><a href=\"https://html.spec.whatwg.org/#toc-browsers\">HTML Standard</a> html标准</li>\n<li><a href=\"https://tc39.es/ecma262/\">javascript标准</a></li>\n<li>网络基础知识</li>\n</ol>\n<h3>前端框架</h3>\n<ol>\n<li>react</li>\n<li>前端状态管理(redux, hook, Mobx)</li>\n<li>next.js</li>\n<li>webpack</li>\n</ol>\n<h3>横向技术</h3>\n<ol>\n<li>跨端(端)技术</li>\n</ol>\n<ul>\n<li>跨端技术 flutter taro</li>\n<li>端技术 Android/ IOS</li>\n</ul>\n<ol start=\"2\">\n<li>服务端技术</li>\n</ol>\n<ul>\n<li>node.js egg.js(如何构建一个高可用的服务端系统)</li>\n<li>go</li>\n</ul>\n<h3>解决方案</h3>\n<ol>\n<li>微前端方案</li>\n<li>离线化(预加载)</li>\n<li>拆包</li>\n<li>骨架</li>\n<li>服务端渲染</li>\n</ol>\n<h3>工程化</h3>\n<ol>\n<li>服务部署运维(docker Kubernetes)</li>\n</ol>\n<h3>思考(做事方式)</h3>\n<p>这里会记录一些思考,会随着自己的认知定期修改这部分内容.一些内容会沉淀成记录\n要从把事做完到做好到做广.</p>\n<ol>\n<li>数据 => 业务</li>\n<li>做好监控(用户行为 异常监控)</li>\n<li>如何能做到业务技术两手抓</li>\n<li>探索推进业务的方式(往前看 多聊, 视角的切换(长期短期 用户视角))</li>\n<li>先想好在做 别急 这点不容易</li>\n</ol>\n<p>希望2.0版本能把我们的知识串成一个网,一起把事做好.希望事情会因你不同.</p>\n<h2>3.0-2022-04-12</h2>\n<p>距离上次更新这个文档差不多刚好一年的时间，博客的内容也大致按照之前2.0版本的内容在更新(万幸没有断更)。3.0版本的内容会在2.0的基础上更加<strong>系统化</strong>。这里对3.0版本的内容做下diff:</p>\n<ul>\n<li>形式上会结合做过的事或者看过的内容，结合自己的想法总结和输出(虽然有些想法比较基础和简单)，也是想在自己这边能把一些东西揉碎想明白的一种尝试，现在主要有以下两种方式:\n<ol>\n<li><a href=\"https://icantunderstand.github.io/blog/%E5%89%8D%E7%AB%AF%E5%BF%AB%E6%8A%A5/\"><strong>前端快报</strong></a>收录近期阅读的前端技术类文章，月维度更新</li>\n<li><a href=\"https://icantunderstand.github.io/blog/%E8%AF%BB%E4%B9%A6%E7%9B%AE%E5%BD%95/\"><strong>读书目录</strong></a>收录自己读过的书和阅读过程中的一些想法，采取了打分推荐的方式(有个人喜好)，根据读书进度实时更新。</li>\n</ol>\n</li>\n</ul>","fields":{"readingTime":{"text":"4 min read"}},"frontmatter":{"title":"初心","date":"2019-07-10","tags":"思考","path":"/my-heart","top":true,"summary":null}}},{"node":{"id":"efb8a435-cea5-59e6-bc37-3b2058087a28","html":"<ul>\n<li>要有刨根问底的精神</li>\n<li>多思考这件事为什么是这样</li>\n<li>提取事物相同的模式 从更上层或者多角度去看相似的问题</li>\n<li>有深度的刻意练习才能产生提高</li>\n<li>做技术 可以从技术角度去产生技术方案也可以从用户产品视角去思考技术 不要把这两个孤立开来</li>\n</ul>\n<h2>跨端的本质</h2>\n<p>一句话概括: 如何技术手段以较低成本和较高的稳定性实现端业务的快速发展\n在讨论具体的跨端方案时，先看几个在选择跨端方案的场景</p>\n<table>\n<thead>\n<tr>\n<th>目标</th>\n<th>考量点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>动态化</td>\n<td>1. 包体积问题是一个app发展到一定阶段必定要考量的问题，也是一些大厂在内部推动跨端方案的一个核心诉求 2. 业务动态化诉求(快速迭代/动态更新)</td>\n</tr>\n<tr>\n<td>人效</td>\n<td>跨端方案可以实现一次开发多端使用，提升人效 1. 原生能力需要端接入或者端技术能力，长期需要多端技术能力 2. 多端展现存在差异，需要开发中磨平 3. 通常说跨端都从h5(动态化技术)的视角切入，h5和native不是非此即彼的关系，事是大家的</td>\n</tr>\n<tr>\n<td>性能</td>\n<td>技术方案存在性能瓶颈，通过其他技术方案可以解决性能问题，优化业务体验</td>\n</tr>\n<tr>\n<td>技术基建能力</td>\n<td>1. 技术储备 2. 业务在不同技术方案下探索(小程序)</td>\n</tr>\n</tbody>\n</table>\n<h2>react理念(特点)</h2>\n<ul>\n<li>\n<p>数据驱动视图，MVVM框架</p>\n</li>\n<li>\n<p>虚拟Dom，可以实现多平台renderer和渲染优化</p>\n</li>\n<li>\n<p>组件化思维，更好的抽象/组合/代码复用</p>\n</li>\n<li>\n<p>函数式编程</p>\n</li>\n</ul>","fields":{"readingTime":{"text":"3 min read"}},"frontmatter":{"title":"想法片段总结","date":"2020-12-21","tags":"思考","path":"/idea","top":true,"summary":null}}},{"node":{"id":"5c7a7b03-c4dc-5d9a-83cb-50676898ba2a","html":"<h2>受控组件/非受控组件</h2>\n<ul>\n<li>受控组件依赖于state,通过onChange => state => value 适合频繁数据处理表单逻辑场景(校验)</li>\n<li>非受控组件不依赖于state,通过操作dom更新和获取值 适合简单提交表单场景</li>\n</ul>\n<h2>单页应用/多页应用</h2>\n<table>\n<thead>\n<tr>\n<th>对比</th>\n<th>单页应用</th>\n<th>多页应用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>优点</td>\n<td>页面切换快，当前页面刷新</td>\n<td>利于SEO</td>\n</tr>\n<tr>\n<td>缺点</td>\n<td>不利于SEO，需要做服务端路径处理和应用内前进后退逻辑</td>\n<td>切页需要重新加载资源，有卡顿空白的问题</td>\n</tr>\n</tbody>\n</table>\n<h2>前端架构模型(MVC/MVP/MVVM)</h2>\n<h3>MVC</h3>\n<h4>客户端MVC</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 821px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/c8ed590ff80f4f312af2f12c503c4b14/02cd5/mvc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.20000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChklEQVQ4y51U32vTUBTu3+ijj4IPPgg+C/rkXhR8ElSw4HSCujE3qGOjbGhbtrK5rWN27dr015LbNmmTNj+bJrn5JL/WNm1FPHA5N+Sc757zne/eBGLmuq6/PFNGYwiKgZ631BH66giSNgIN/0dx05b4G+BFo4t0oYHsFYdMkcVGnsHmSR1j214OOA0Q7SkNvk8rLN5+TuHd1xRerG7h7koST7fysKk7d3jkE9OVTfaBv2zx2DuvIV2o4c3+Je6tZfFo+xiW48wAToPOVGhZFhzHCZZtwxiZqAsDEElBW1JQ5SXwsjY5MUbVXMuCIICQNnheAEcIhKEC05kkW9TFQNXB1OvgOA6NRgOEEFBKbytd2LJnqmnBmeKKhgkOpehrRjgYF3Dp8qEIso4SkcAICspdGUx3iOu2dMtZJBdJH+GsKYARVFQFDRVeQaHZQ2egBRVGgddExMFvDqnDS2xnC/iYKeHVfhGdoTbThWKYyJUINg5+YT2dx1r6BM93CsjXukGFEWClLSJT6uDL3iGeJTfx4MNP3F8/RktU/DkYlu3TIKoGsuU2Pu1k8HJ1Ew9ff8Od5A+kimwIGHLV5AfIXd3grM4jdXGDld0LPNk9h2yYAHV8MC9UVDTkr1m/zVylg/dHVTz+fopcvTt/UzySZd1ArdP3yPCJt20bLMuiWq2i1WyCcBzEfi8cihP4aCiGYYDneYii6EumL/CotAgyZTbAD/XpSYNhGJTLZT/e+55WQKSChCdiXdf9JM3zpom2KOOo1pkkhDpTVRXD4RDSYOBXHb8tMzqMyR62NV76ACzT7owO41dQluW5R2NRbBw0sehErx2vvfiL8i+2ENA0TfR6vf8C/APdFF89KhKOygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"客户端mvc\"\n        title=\"客户端mvc\"\n        src=\"/blog/static/c8ed590ff80f4f312af2f12c503c4b14/02cd5/mvc.png\"\n        srcset=\"/blog/static/c8ed590ff80f4f312af2f12c503c4b14/63868/mvc.png 250w,\n/blog/static/c8ed590ff80f4f312af2f12c503c4b14/0b533/mvc.png 500w,\n/blog/static/c8ed590ff80f4f312af2f12c503c4b14/02cd5/mvc.png 821w\"\n        sizes=\"(max-width: 821px) 100vw, 821px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>用户操作视图后，调用Controller接口发起数据更新</li>\n<li>Controller调用Model接口做数据变更，Model发起数据变更通知</li>\n<li>数据监听数据变更通知，完成页面更新</li>\n</ol>\n<h4>服务端MVC</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 958px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/3129270341e242661c4b265a71992503/b97f6/serverMvc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.60000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABcSAAAXEgFnn9JSAAADaUlEQVQ4y5VUaW/bRhDVLy/6oTHQfmgDxG2cFHIQO02iVimCGnXdFnac2EIEkzIp6zQtUqKuSKR4UzxEcV9BmlKoWGqQBZYLzuy+nTfzZjO4HST+EIL00DQNo9EIkiRBURT4vr/iT+0Pk5XOJA6ycM5ms3hGQxRFUBSFwWCAQqGA+Xy+9C/2ROcIIZsBLctCu92GqqqgaAq5X3Ngyyy2f9yG4zjgeT6+yDCMzYAJ5pKC67rxWmWvsLf7FO0bAS/3X8S2iHaaenLmboSf5iX6vu8w+IP5F6fXReTpQwwtaQVouXdThGlA07KQ1Y/wbfsXfE3tYNv/E8cjCphF4ayA3Y1wLaBtIWse4Xs5j3u1J/gJf+F4/AWAS2dCPsrjXv0AO7U8HjI5PORe4bxd+nLZhGEIL/DhkwCTyQStVgu+46EriDB0Iy7IdDpFEATrq5wYSJjYOsoA96vP8c27R9gq/Iz71y9xo4gIZgGkiQy+xcfSWShhM2B4azNsExRfBs1foXRzhTO2iKk9RegECIM5FFWJtZqu9AKQELKaw08HM2nincSg5HB4q7Hg1M66/MWZSv7pjOd5UWuRfr8f50w3dLieB13X8UQ9wndSDl+VdvCD+xpH4yI8w4Hr3dI1TTPud9M0P0YYIff7fULTdFwAVVPjPo1oPRJeY6u1h3vlXWx1n+Gwe47A9uG4DmzbhiAIYBgGHMetpxxVL02pLnJghSoqYgOXfAW98WDpd10nvnQ2i1vxLqBn23CTZK97ytbZVc24m0PH9yGaFuF1Ax3LhmjZsBJJRFJKz+hQpAbTkOBOx9DVHixjCMtUEtkQOiNOFDyTdbLbHWJXHOC5PkVj+GFxbVoasc1xXMiDAozxMdrNA7jaWwy7F+E8TAC7iorfNJs8bnB4XLtG3nTR/DBaAUxTjQGHRRjSKZiLHFztHMMunQCCzvQkGdlCkeyVWOxflpF9fwG+P9gIGLUeSx+izv6OZuUAlVIeFfY0TDbRma6m48VoQh5clLBNXSKv2xAk+X8jtJQS5P4/KJ7tw9fPoY7LYTBPisLLE2QHEnlQaSCaTyUN3GcoD8UzyL2/0Si/gimdoNcufsyhrGk4qdbISbWGN7U63tQakFR13au8fI0E/hqNOotm8wr1GoNer/P5Xl6nw03aTOvwP6OZFu6jb6HuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"服务端mvc\"\n        title=\"服务端mvc\"\n        src=\"/blog/static/3129270341e242661c4b265a71992503/b97f6/serverMvc.png\"\n        srcset=\"/blog/static/3129270341e242661c4b265a71992503/63868/serverMvc.png 250w,\n/blog/static/3129270341e242661c4b265a71992503/0b533/serverMvc.png 500w,\n/blog/static/3129270341e242661c4b265a71992503/b97f6/serverMvc.png 958w\"\n        sizes=\"(max-width: 958px) 100vw, 958px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>用户发起页面请求</li>\n<li>服务端根据路由规则把请求交给特定的Controller处理，Controller完成数据的组合和页面模版渲染</li>\n<li>服务端将渲染结果返回给客户端，客户端完成页面的渲染</li>\n</ol>\n<h3>MVP(Model-View-Presenter)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 816px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/590878340d780c4ae198215c2be61b28/b4098/mvp.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkUlEQVQ4y61Uy27TQBTNL7KFD0AClizYsGJFhVQkJBaIRQNqF62qFlXlkVDRRyiBttRp2qZumyZObMdx7PHbTmzHB42dIDulEUJc6cq2fOfMPXPumRwmIoqiOGno7gCK3YdieVDtJA13cK0uHbk/gSV1Eb5fiPhcaeIr28FOjcdi+RLrTHOiNpu5NNjkzluVC7ycf4f8SgEzc6u48/QtZouV+N9wGmAajLZHv8IwRPlcQJFpYP3HGWbW9nHrVREP1/bj2nB4nW5MOY0+4grDG8D0BlAMC8dtGQIxwakW2K6OumImGwYBWq0WeJ6HLMsQBAGapmXPkEZDMRGONneDIYLRu9QR0RZECKKIOteCZtogug6WZXFyeoquLCMIAuQoNUVRoKoqdF3HpURgmQbaHQkqIdCICsdx4jQtC0Q3ICokXjzwfehEBVF6IIoMRMMEkILRhWdNHucdgjNBQeVKQI3roNYU4XlehkXP7qPKK+BUB03igtc91GUTxPaylA+bMgpMEx/3WBQOLvGmdI6Fch3hcJgoOxJCNR0Ujzgsbx1idYfBwhcGz94zYLheIsq4kGl0sXncxtxKAU9eL+PefAmPP1RixcejQkMxHWzXRORXi5jNL+PBi0Xczu9guy6NAZMOftZFbBw1UKrxmCuxuL/0DY/WDxCNOxwBaraLzWoDe3UJn6ptPN84wd2lXew2pCzlYZTMomw44GQNvh+g7/uxa9IDT59BGMai+L4fC0RZxINt2za63S4IIfHTICpOGzyOWr2UJRMrpk1wU+SogqZpwnVd6IaBvmOjykkoX0m/HZFx0hQfZ7ycpR7FdP6mo6nWGy+m3VqWNfWauhFw8vqiQQ+53+//P0Bqcrkn/xPgL/6nXF5brCTVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mvp\"\n        title=\"mvp\"\n        src=\"/blog/static/590878340d780c4ae198215c2be61b28/b4098/mvp.png\"\n        srcset=\"/blog/static/590878340d780c4ae198215c2be61b28/63868/mvp.png 250w,\n/blog/static/590878340d780c4ae198215c2be61b28/0b533/mvp.png 500w,\n/blog/static/590878340d780c4ae198215c2be61b28/b4098/mvp.png 816w\"\n        sizes=\"(max-width: 816px) 100vw, 816px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>用户操作页面，调用Presenter</li>\n<li>Presenter直接调用Model接口更新数据</li>\n<li>Model更新后通过观察着模式通知Presenter</li>\n<li>Presenter接受更新通知后调用View接口更新视图</li>\n</ol>\n<h3>MVVM(Model-View-ViewModel)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 802px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/de322df9e4495cc53c6668e371dfa750/5a6dd/mvvm.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVQ4y52US28SYRSGWbpz6d4/4NpfYIxLtyaaGLcu3LjwFqMxURPjpSGp0WDqvV6iwUu10NK01Yq1WpBKaWUoUGCGucAwwzDA8BiGTm/WRD3JyTfJfOc573fm/cbHuuh0Ou4q6yajcYG30QRD0TmCH2YZiiYIxTJEP4b4FPQTftnP68Hr3Hw1zKk33wnOCm6tbyugVDEYnlmg/1EQ//0X9A0848adQR6GZxD8e2ie3YZ+YQec8TF45SD77sUJTCb+DBS1GhPJAp/TspvRtMxkSiSSkkn17aVxfjuVSzvh3DYGrhxmd2AG//j3HtCDdFfvuaTqhGMZRuNZRuJLvPsmMBLLEEnkeR4awz9wh/O3Ahz393PgVpBdfSEuhGNrCj2QF5bdJF/W+LZUIlWQyUoqObnKT1FjWauzoNjESwbT+SrTWZlIKseCpG1U6DiOm55Ss9mi3mzjrLyv6VWyhSKSoqBIJRzbYnN061aBlmVRLBSoqAqptIBULtNotlbV1wwDWVEoKwrpfBHdMNdAdGi2nTWFXlHVtBBEjcWShlQ1mS9p5JQadqu9QUm7A3MFlWXNJK+Z5FQDoaxT1IzeDL1jZaQK4XiW0fgSIzGB4HSa22NJ8mptdSx0OrTabaZSBd59WWTo8zxvp1MEInMMRhd7CleBosZ4ssiz0BQXbz7k5KMxjj7/wk+pwvrGrVabmYzMk+EprgUec6LvPkcCYS6PJFaATm9j97jDsxkmfuR5MJHk2NMo+++OM+8BV/a1HYcPyRyRRI5QbImr72McejDJ6aGvG43dchx000KtmcwvlylXaogVnebKDNd71rJtzLqFaTUw6g23zmzY+Gzbplqtous6mqZh1HQkWeXTwjJb3aLNnt0cLlCWZRcoSRKqIpMrSbyaFfDmuxnmOWOr9P2pU9dC/KWqDQp/6+J+xZZ7Mzr/A9xqTl2/mWb9t5/GfwO7cxVFsWfkf1T4C04gPZhNV0RxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mvvm\"\n        title=\"mvvm\"\n        src=\"/blog/static/de322df9e4495cc53c6668e371dfa750/5a6dd/mvvm.png\"\n        srcset=\"/blog/static/de322df9e4495cc53c6668e371dfa750/63868/mvvm.png 250w,\n/blog/static/de322df9e4495cc53c6668e371dfa750/0b533/mvvm.png 500w,\n/blog/static/de322df9e4495cc53c6668e371dfa750/5a6dd/mvvm.png 802w\"\n        sizes=\"(max-width: 802px) 100vw, 802px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>用户操作页面，调用ViewModel更新Model</li>\n<li>Model更新触发ViewModel更新</li>\n<li>ViewModel和View有双向绑定，视图自动更新</li>\n</ol>\n<h2>react diff</h2>\n<p>react的diff策略基于以下三点:</p>\n<ul>\n<li>DOM节点的跨层级移动操作较少</li>\n<li>相同类型组件有相同的DOM结构，不同类型的组件有不同的DOM结构</li>\n<li>对于同一层级的一组子节点，可以通过唯一id进行区分</li>\n</ul>\n<p>对于以上三点，有以下的更新策略</p>\n<ul>\n<li>tree diff 对虚拟Dom分层diff,不存在直接删除不考虑移动的复用</li>\n<li>component diff  不同类型组件直接替换，同类型组件可以通过组件的属性变化来判断是否需要更新</li>\n<li>element diff React提供了三种节点操作：插入(INSERT_MARKUP)/移动(MOVE_EXISTING)/删除(REMOVE_NODE)来达到同类型子节点复用的目的</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/deae9f75a214638be06f63c42e3174cc/081d5/elementDiff.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABPklEQVQoz3WTCa6DMAxEuf+puAA3AFSWtipL2buw+ev5yxV0sRTFiZPxjJ0467oKxmy+Wd/3crlcZBiG3f6yLFJVlWRZJtM0ve5jznZhh+d5ltvtJl3XyTiOkue5ghIDoG1bjT+fT03IGcNxDKwoCmXEAAgAAyXm+77c73eNEwOU9fl81vgHoOd5cjqdpGkaGfr/C8iq61oHviVifb1edbZy/JTMocPhoHLKopQwDHUPuXEc6x4SoyiS4/G4k7tjyAWMA7BBhrFAOgZ7mFNTZku0A9wyZAaQOgVBoGvqRJMYNCRNU00G0OPx+AQ0MNd1NTMsYNZ3vc7UjT2tZ1VrMltbc7aEXoC8Kdghw54Jly0JTGEGED7JyrJU/6dke8w0AnDk0CAAMZrAM8EAS5Jkx067/P5Tvv2c91/0zTeGf5VwVkJJR/hYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"element diff\"\n        title=\"element diff\"\n        src=\"/blog/static/deae9f75a214638be06f63c42e3174cc/00d43/elementDiff.png\"\n        srcset=\"/blog/static/deae9f75a214638be06f63c42e3174cc/63868/elementDiff.png 250w,\n/blog/static/deae9f75a214638be06f63c42e3174cc/0b533/elementDiff.png 500w,\n/blog/static/deae9f75a214638be06f63c42e3174cc/00d43/elementDiff.png 1000w,\n/blog/static/deae9f75a214638be06f63c42e3174cc/081d5/elementDiff.png 1264w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>react fiber reconciler过程</h2>\n<p>reconciler分为render阶段和commit阶段</p>\n<ul>\n<li>render阶段利用已有的fiber tree生成workInprogressFiber render阶段可以被高优先打断</li>\n<li>commit阶段是更新阶段，将render阶段需要更新的操作执行，commit阶段有三个主要阶段钩子\n<ol>\n<li>before mutation(执行DOM操作前)</li>\n<li>mutation(执行DOM操作)</li>\n<li>layout阶段(执行DOM操作之后)</li>\n</ol>\n</li>\n</ul>\n<h2>react Server Component</h2>\n<h2>自定义hook实现</h2>\n<h3>useDebounceValue</h3>\n<pre><code>const useDebounce = (value, delay = 500) => {\n    const [debouncedValue, setDebouncedValue] = useState(\"\");\n    const timerRef = useRef();\n\n    useEffect(() => {\n        timerRef.current = setTimeout(() => setDebouncedValue(value), delay);\n\n        return () => {\n        clearTimeout(timerRef.current);\n        };\n    }, [value, delay]);\n\n    return debouncedValue;\n};\n</code></pre>\n<h2>参考</h2>\n<p><a href=\"https://juejin.cn/post/7099810539315920926\">react 中 ReactElement 与 Fiber 的关系</a><br>\n<a href=\"https://www.plasmic.app/blog/how-react-server-components-work\">How React server components work: an in-depth guide</a></p>","fields":{"readingTime":{"text":"4 min read"}},"frontmatter":{"title":"react基础知识梳理","date":"2023-08-02","tags":"React","path":"/base-react-summary","top":null,"summary":null}}},{"node":{"id":"0ae5779e-bf32-5ee1-bc37-cd3bc37f9819","html":"<h2><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction\">AsyncFunction</a></h2>\n<p>在项目中需要根据配置生成Async Function来保证配置的串行执行，Async Function在创建的时候只能访问到全局作用域的变量，需要注意。在node中可以通过<a href=\"https://github.com/nodejs/node/issues/9474\">vm.runInNewContext</a>来解决。</p>","fields":{"readingTime":{"text":"1 min read"}},"frontmatter":{"title":"JavaScript基础梳理","date":"2023-08-01","tags":"JavaScript","path":"/base-js-summary","top":null,"summary":null}}},{"node":{"id":"ac69ccad-c7bf-57af-9d78-a08888080dee","html":"<h2><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\">WebSocket</a></h2>\n<p>WebSocket建立在TCP协议之上，通过HTTP协议完成握手升级。默认端口80(ws)和443(wss),没有同源限制</p>\n<ol>\n<li>\n<p>WebSocket支持双向通信，在实时性要求更高的场景更合适。</p>\n</li>\n<li>\n<p>二进制支持更好</p>\n</li>\n<li>\n<p>传输开销少，相对于HTTP传输头部数据更少</p>\n</li>\n<li>\n<p>支持扩展,可以实现自定义的子协议</p>\n<pre><code> // 创建连接\n const socket = new WebSocket(\"ws://localhost:8080\");\n // 监听open事件发送消息\n socket.addEventListener(\"open\", (event) => {\n     socket.send(\"Hello Server!\");\n });\n // 监听message事件接收消息\n socket.addEventListener(\"message\", (event) => {\n     console.log(\"Message from server \", event.data);\n });\n</code></pre>\n</li>\n</ol>\n<h3>websocket属性</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WebSocket.binaryType</td>\n<td>数据传输格式</td>\n<td>'blob'(默认)/'arraybuffer'</td>\n</tr>\n<tr>\n<td>WebSocket.readyState</td>\n<td>WebSocket连接状态</td>\n<td>CONNECTING/0-连接中 OPEN/1-打开，可以发送消息  CLOSING/2-关闭中 CLOSED/3-关闭态或者不能被打开</td>\n</tr>\n<tr>\n<td>WebSocket.bufferedAmount</td>\n<td>返回没有被传输到服务端的入队数据</td>\n<td>只读值</td>\n</tr>\n</tbody>\n</table>\n<h3>实例方法</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WebSocket.close()</td>\n<td>关闭连接</td>\n</tr>\n<tr>\n<td>WebSocket.send()</td>\n<td>将数据送进发送队列等待发送</td>\n</tr>\n</tbody>\n</table>\n<h3>事件</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>close</td>\n<td>断开连接的时候触发</td>\n</tr>\n<tr>\n<td>error</td>\n<td>因为错误而断开连接出发</td>\n</tr>\n<tr>\n<td>message</td>\n<td>接收消息触发</td>\n</tr>\n<tr>\n<td>open</td>\n<td>链接建立触发</td>\n</tr>\n</tbody>\n</table>\n<h3>建立连接(握手过程)</h3>\n<ol>\n<li>\n<p>客户端申请协议升级</p>\n<pre><code> GET ws://example.com/ HTTP/1.1  \n Connection: Upgrade  //升级协议\n Upgrade: websocket  // 升级websocket\n Origin: http://example.com  \n Sec-WebSocket-Version: 13  // 指定websocket版本 如果服务端不支持服务端会返回支持的版本\n Sec-WebSocket-Key: d4egt7snxxxxxx2WcaMQlA==  // 与服务端的返回头Sec-WebSocket-Accept相匹配，提供保护防止恶意连接等\n</code></pre>\n</li>\n<li>\n<p>服务端响应协议升级</p>\n<pre><code> HTTP/1.1 101 Switching Protocols // 101切换协议\n Connection:Upgrade\n Upgrade: websocket\n Sec-WebSocket-Accept: Oy4NRAQ13jhfONC7bP8dTKb4PTU= // 根据请求Sec-WebSocket-key生成\n</code></pre>\n</li>\n</ol>\n<h3>连接保持</h3>\n<ol>\n<li>发送方->接收方：ping</li>\n<li>接收方->发送方：pong</li>\n</ol>\n<h2>三次握手</h2>\n<p>通过三次握手建立TCP连接，三次握手为了确认双方传输的序列号\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 745px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPElEQVQ4y21Ty07jMBSN+CF2iK/gQ/gdliyQumEkxKpUHakwmpRFxDNNUlJFQigPMrRJWgfHaRLH8R3BRaYwc1b29X2dc681AJBSAsBqtTo8PDw4OCCEKOMmbm9vj46OTNNUFk1KKYRo2xYAtre3d3Z2AKBtW7mBrusAIMuy3d3d8XisHDSsgM/7+/t7e3tFUaBFAVPbtr21taXrOgAIId4qA0BZloQQzvl8PnccJ89zQsi/bQshxuPx6+urIvUW7Pu+bduEEMbYYrFwHKff75v397913TTNNE2rqsLWOOcq11vbm7mbpqmqCs+r5fLx8XHqur90fTgcep6XJEkcx0j4g7MiJqWs67osSyVBJ2WZ56HjZL4/dd2zfv/6+poxZlnWdDrlnGuoR9u2Xdet12tKaVVVrCiuLi6GvV6/17MNw314iOM/nHNKKYqPxTQhBM4DJUmSZDQaDQeDn6enV4bhh2FZfxJWan0EA0CapsvlkjFGKR2NRufn51EUBVGE/HERmqbhnOd5jhaEhrtFCFmv13meB0Hw9PQ0dZwfx8eXl5e2bSdJ0jQNeuMKqCl+UZtzXtc1Tn4+nxuGMRgMTk5OdF2PojBN06Kgm/6a4oCjQrVV7rqugyC4ubmxLOvu7g5H9SnYt8rYIb5hRrUCcRy/vLxg8AfnzTUsy5JS+u1LoSsesiz7D2e8h2HoeR7OTH4FAFBKXddtmka843vbQghK6Ww2WywWz8/Pvu9PJpM4jr13WJbFGNv8sH8BdCuyVQ0e+JcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"三次握手\"\n        title=\"三次握手\"\n        src=\"/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png\"\n        srcset=\"/blog/static/450ef929b273efe5395a856db3581d99/63868/threeShake.png 250w,\n/blog/static/450ef929b273efe5395a856db3581d99/0b533/threeShake.png 500w,\n/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png 745w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>客户端在向服务端请求连接的时候，会向服务端发送一个SYN报文段。会随机选取一个client_isn作为序号字段放置在该SYN报文中。</li>\n<li>服务端在收到该报文后，会发送给客户端一个报文并且设置TCP的缓存和变量。该报文的ack字段是client_isn + 1,序号字段为server_isn,SYN比特为设置成1.代表当前服务器已经准备接收数据</li>\n<li>客户端在接收服务端的确认报文后会创建TCP的缓存和变量并且向服务端继续发送报文(此时的报文可以携带上数据),其中ack字段是server_isn + 1,序号字段是client_isn + 1,SYN字段为0(此后的报文中SYN字段都为0).至此TCP连接建立成功。</li>\n</ol>\n<h2>四次挥手</h2>\n<p>通过四次挥手，中断双方的TCP连接。通过四次可以确定双方都可以中断连接\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 340px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACnUlEQVRIx4WVS2pyQRCF7+qyCFcgCK7AUYYhOnfgyEAgDl2BRIMKOjAPiCGaGI3vtyY+ovXzNZS0915/G5qr3V2nTlWdrnZERLbbrfz+/pr59/cn+/2e5cPXHqzp+m63k9lsJtPpVJbLpVl32Oj1elKr1eTj4+PI0A/M/gL49PQkLy8v0m63zZoDO4Cen5+lXC7L29ubrFYrDxs/wE6nI4+Pj5LP58232+2Ks9lsjIdMJiORSEQuLy8PTGHgN3Qd57lcTq6uriQcDsvd3Z04xWJREomExGIxSaVSZhK+bahMbcbNZlOSyaREo1G5vr6Wm5sbSafT4tze3kogEJBgMCj39/fy8PAgk8nEF4ipTkqlkoRCIbm4uJB4PC7ZbNakzcG4UCiYSg2HQ5nP53JquEFRRaVSOVpzKMB6vTZ/+v2+DAYDc3CxWJgvB1utlkm4eyAVdzSOfWA0GhkQNigWzgCGPY5+fn7MRBmcYQ/JHQHaiQYQA/cAkCIgYvYBYb6+vkqj0TgU0AM4Ho8PtwV2ypCQv7+/TX4JU3WKA1+GmlDU/vn5aUAxVPBTgzPk3Rb7EUPyBKNzVdbzhI8y7H0PIF7d1w4VEK4NCHNyXq/XTTo0DY5NlxyqhDQVGCIZDCkOwOSOdCCZ9/d3c1W1mI6CIRM2McQIcK2qtifN59mQVRp0DMIGiAkI4NxtioX+7IYBS9+iaCtCa3ZVMYY5QBQLcDtknGPnkQ2Di03IAJxqsLqOA5XZ19eXPyC5Y9pF8Zv2oLKaQw8gOaT8hOLuzu6urf/dwj4ChBkh24CnGJ4FBIRK8jb87z1xA9qyOWpfhFqtVs0L5s4hldZO4n6sqLz2SU/IDLqvPlCnQraZclP0/fF0G76wRMDnAN2ysn//Aw2QzK7dGbfNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"四次挥手\"\n        title=\"四次挥手\"\n        src=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png\"\n        srcset=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/63868/fourClose.png 250w,\n/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png 340w\"\n        sizes=\"(max-width: 340px) 100vw, 340px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>终止方向另一端发送一个TCP报文，其FIN比特位被设置成1</li>\n<li>接收方回复一个ACK报文并且发送一个FIN报文</li>\n<li>终止端回复一个ACK报文，至此两方为了维持TCP连接的缓存和变量都将清除(接受FIN端需要把自己剩余的信息发送完 才能发送FIN报文)</li>\n</ol>\n<h2>TLS握手</h2>\n<p>在使用HTTPS进行通信的时候，会进行TCP握手建立TCP连接，TLS握手完成数据安全的校验才能进行通信\n在TLS握手中主要进行了一下的操作</p>\n<ul>\n<li>指定将要使用的TLS版本</li>\n<li>决定将要使用哪些密码套件</li>\n<li>通过服务器生成的公钥和SSL证书颁发机构的数据签名验证服务器身份</li>\n<li>生成对话密钥，在握手完成后使用</li>\n</ul>\n<h3>TLS握手的过程</h3>\n<ol>\n<li>客户端问候(client hello)消息: 客户端向服务器发送问候消息开始握手，该消息包含客户端支持的TLS版本、支持的密码套件、客户端随机数(client random)</li>\n<li>服务端问候(server hello)消息: 回复客户端问候消息，内含服务端的SSL证书、服务端选择的密码套件、服务端随机数</li>\n<li>身份验证 客户端对服务端的证书进行验证</li>\n<li>预主密钥 客户端在发送一串随机字节即预主密钥(premaster secret)，预主密钥使用公钥(从服务端发送的SSL证书中获取)加密</li>\n<li>解密预主公钥 对预主密钥解密获得客户端随机数</li>\n<li>生成对话密钥 客户端和服务端均使用客户端随机数、服务端随机数和预主密钥生成对话公钥</li>\n<li>客户端就绪</li>\n<li>服务端就绪</li>\n<li>实现安全对称加密，使用对话密钥进行通信</li>\n</ol>\n<h2>图解不同协议</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 418px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB1ZVksAL/xAAZEAEAAwEBAAAAAAAAAAAAAAACARESACL/2gAIAQEAAQUCwtMqVmux6ZmVVd//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAgEAACAAQHAAAAAAAAAAAAAAAAAQIQETEhIkFhcYGR/9oACAEBAAY/AsXF6XdNmamZt9l3TmX/xAAbEAACAgMBAAAAAAAAAAAAAAABEQCRIVHRgf/aAAgBAQABPyEGN7RGFSktCgQnaAvJHmNTNQi7AIJm5//aAAwDAQACAAMAAAAQY9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EJgkof/EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxB0f//EAB0QAQEAAgMAAwAAAAAAAAAAAAERACExUXGRsdH/2gAIAQEAAT8QgkWxY6g1rCTRgfK3W8lVetxbQKooOeI41hNLwr95+sKBe637z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"不同协议\"\n        title=\"不同协议\"\n        src=\"/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg\"\n        srcset=\"/blog/static/49345da67692d6013e53851c0301dc33/0479a/differentProtocol.jpg 250w,\n/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg 418w\"\n        sizes=\"(max-width: 418px) 100vw, 418px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>常用请求状态码</h2>\n<table>\n<thead>\n<tr>\n<th>状态码值</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>301</td>\n<td>永久重定向 可以SEO，会被浏览器缓存 res.writeHead(301, {'Location': '<a href=\"http://www.baidu.com/&#x27;%7D\">http://www.baidu.com/'}</a>);</td>\n</tr>\n<tr>\n<td>302</td>\n<td>临时重定向</td>\n</tr>\n<tr>\n<td>304</td>\n<td>在缓存协商过程中，304代表客户端可以使用当前的缓存结果</td>\n</tr>\n<tr>\n<td>201</td>\n<td>表示请求已经创建成功并且创建了新的资源，通常作为POST请求的返回值</td>\n</tr>\n<tr>\n<td>204 No Content</td>\n<td>表示请求已经成功，通常用在PUT请求返回中，会返回ETag并且可以被缓存</td>\n</tr>\n<tr>\n<td>401 Unauthorized</td>\n<td>客户端错误，指由于缺乏目标资源要求的身份验证凭证，发送的请求未得到满足</td>\n</tr>\n<tr>\n<td>403 Forbidden</td>\n<td>客户端错误，指服务端有能力处理请求，但是拒绝授权访问</td>\n</tr>\n<tr>\n<td>400 Bad Request</td>\n<td>客户端错误，服务端无法处理该请求</td>\n</tr>\n<tr>\n<td>405 Method Not Allowed</td>\n<td>表明服务器禁止了使用当前HTTP方法</td>\n</tr>\n<tr>\n<td>502</td>\n<td>网关错误</td>\n</tr>\n<tr>\n<td>503 Service Unavailable</td>\n<td>服务不可用</td>\n</tr>\n</tbody>\n</table>\n<h2>前端存储(cookie/localStorage/sessionStorage)</h2>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>生命周期</th>\n<th>大小</th>\n<th>传递方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>cookie</td>\n<td>服务端生成有过期时间</td>\n<td>4K左右</td>\n<td>在通信中都会携带</td>\n</tr>\n<tr>\n<td>localStorage</td>\n<td>存储在本地,长期有效存在同源策略</td>\n<td></td>\n<td>不参与服务端通信</td>\n</tr>\n<tr>\n<td>sessionStorage</td>\n<td>仅在当前会话有效(刷新页面有效),关闭页面失效。有同源策略</td>\n<td>5MB</td>\n<td>不参与服务端通信</td>\n</tr>\n</tbody>\n</table>\n<h3>cookie基础知识</h3>\n<p>cookie通过服务端的set cookie来做用户信息的存储 通常的设置方式如下:</p>\n<pre><code>Set-Cookie: name=value; Expires=Wed, 21 Oct 2019 07:28:00 GMT;\n</code></pre>\n<ol>\n<li>cookie可以设置domain和path\n<ul>\n<li>不同domain的cookie不能共享</li>\n<li>相同domain的不同path下设置的cookie不能共享</li>\n<li>子path可以共享根domain下的cookie</li>\n</ul>\n</li>\n<li>设置HttpOnly能防止cookie被js读取</li>\n<li>设置SameSite可以限制cookie的发送</li>\n<li>在通过XmlHttpRequest跨域请求的时候 设置withCredential: true的时候 会携带cookie，服务端需要设置响应头Access-Control-Allow-Credentials: true 才能拿到响应</li>\n</ol>\n<h2>xss(跨站脚本攻击)</h2>\n<p>xss是一种代码注入攻击。 攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。 利用这些恶意脚本，攻击者可获取用户的敏感信息如Cookie、SessionID 等，进而危害数据安全</p>\n<h2>csrf(跨站请求伪造)</h2>\n<p>跨站请求伪造是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。例如:</p>\n<ol>\n<li>受害者登录a.com，并保留了登录凭证（Cookie)</li>\n<li>攻击者引诱受害者访问了b.com。</li>\n<li>b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。</li>\n<li>a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。</li>\n<li>b.com以受害者的名义执行了act=xx。攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。</li>\n</ol>\n<h3>csrf的防护策略</h3>\n<ul>\n<li>令牌同步模式 服务端生成令牌Token，再次请求的时候携带Token</li>\n<li>检查Referer字段</li>\n<li>添加校验token 区分来源</li>\n</ul>\n<h2>单点登录(Single Sign On)</h2>\n<p>单点登录SSO指在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统\nSSO一般都需要一个独立的认证中心（passport），子系统的登录均得通过passport，子系统本身将不参与登录操作，当一个系统成功登录以后，passport将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自的受保护资源，为了减少频繁认证，各个子系统在被passport授权以后，会建立一个局部会话，在一定时间内可以无需再次向passport发起认证\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 737px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 126.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAADN0lEQVQ4y5VTWY7cRBjum3AQTsMBuAOvnIEDJMATL0wSCSkSgigkg0KGYTJMuttLt5dyuVz7+lcVsj2jWWAE/E+2/H9V3+ZNubs6ffVDcXkanJE+nFD6ddN8YCwDvFXqade9RANAUMwW78n27SSpBQgxxnEcN3woqjdPq5+/ihIPOX+C8eb01y/LKuf8mVKb388//e0sZxgr/90X9Tefo/7K5GU45xslhWJYUiQFV8acU/qeMR5CznkI4UKpo5m3ISSGDOtdcJByyjkzxjbeB82JUtI6l5w7av2yrh2leCLgHGidY0xp3o8JUoo55/n1FsyQ1XIlU8V40rZeCKkVJqRuGkKps84HV23baeBSCi7EDTgERRFn03xmjEUIrwhhfd8PA+fce59SAoCcc79nuw8H67TW+hYsKSLjYJ2P1m61frbbTV2H8NA0DcbYWmuMcd619WCU+zvtQUkOKeUY996/5jynBItUay0AhNm/VF/hP959xCMSt7QXsNFi1VwCvJGz/ri8wmL7elVf8Muz/Ugw6tF1VA/AFcBPhOSlByEEjHEIYdGc2j0tr1omKCHkEXCMP2KcrZVa931XV1WPkNbGB3csey3tP2i+S/u1EDmlEKNzbrbKOYBZRLufij+PTNA7bt+A59PSDP5l8WPRnIwxKaUU54/tll282xEyIDQIISila8Pw3ZI8Pxw851JrJWXXddbaECDliBvOic45BR9SjGvOICmiBJNp0pQWzp00jed8JERJmRd56wBAjA/qGYJiM1hrbY3GnB3GMQEEAGPMDuN7YJjDv28YH7S6NmzOx7mYUgTIKT+pD2Vdl0VBCDHGrD191O0Y47qxzvfTxNjcdCFZ/RE1JVJKPNqwh2BCvHOETBDDUItjMfhg16j4fwH3Xde2Xdu1xfagpfsftJ8zlq8Nyt2eXZ7t8ThQSlNK/w5+RmmKkXORcuz27Oq8UlpM03RdEue8okhLvvK5+QHzGum3TdP1PUJoohMZuNX+Hm2AqDmWgq1XUTrhJdt148U4Wu+DnydGWENOy7lCiE1VVcfjoWmO7TJN0xyPN89tWxwOqL+epmnqqt7tdrvttizLi4uLvwCQgY3VfIS/ggAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sso\"\n        title=\"sso\"\n        src=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png\"\n        srcset=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/63868/sso.png 250w,\n/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/0b533/sso.png 500w,\n/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png 737w\"\n        sizes=\"(max-width: 737px) 100vw, 737px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>跨域资源共享（Cross-origin resource sharing）</h2>\n<p>跨域资源共享是W3C标准，规定了浏览器和服务器可以通过交互来确认跨域请求是否安全的方式。</p>\n<h3>跨域的条件</h3>\n<p>端口、域名、协议不同为跨域请求</p>\n<h3>跨域请求分类</h3>\n<ol>\n<li>简单请求\n<ul>\n<li>请求方法是： HEAD/GET/POST</li>\n<li>请求头是: Accept/Accept-Language/Content-Language/Content-Type（需要注意额外的限制）/Range</li>\n<li>Content-Type 标头所指定的媒体类型的值仅限于: text/plain multipart/form-data application/x-www-form-urlencoded</li>\n</ul>\n</li>\n<li>复杂请求 非简单请求，在进行跨端请求的时候 需要发送预检(OPTION)请求</li>\n</ol>\n<h3>跨域请求交互</h3>\n<h4>简单请求跨域交互</h4>\n<p>请求端请求头:</p>\n<pre><code>GET /resources/public-data/ HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example  // 标识请求来源\n</code></pre>\n<p>服务端响应头:</p>\n<pre><code>HTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 00:23:53 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: * // 告知浏览器该资源可以被哪些域名访问\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nTransfer-Encoding: chunked\nContent-Type: application/xml\n</code></pre>\n<h3>复杂请求跨域交互</h3>\n<p>请求端预检请求</p>\n<pre><code>OPTIONS /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example\nAccess-Control-Request-Method: POST // 跨域请求方法\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type // 跨域请求的自定义请求头\n</code></pre>\n<p>服务端响应预检请求</p>\n<pre><code>HTTP/1.1 204 No Content\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\nVary: Accept-Encoding, Origin\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\n</code></pre>\n<p>在完成预检请求后进行正常的请求交互响应</p>\n<h2>TCP/UDP</h2>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>连接性</th>\n<th>可靠性</th>\n<th>相关协议应用层协议</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>TCP</td>\n<td>面向连接</td>\n<td>可靠</td>\n<td>http/https/ftp/telnet</td>\n</tr>\n<tr>\n<td>UDP</td>\n<td>无连接可直接发送数据</td>\n<td>不可靠，容易丢包报文乱序等</td>\n<td>dns/tftp</td>\n</tr>\n</tbody>\n</table>\n<h2>http2.0/http1.1</h2>\n<h3>http 1.1</h3>\n<p>超文本传输协议(HyperText Transfer Protocol-http)\nhttp1.1三种连接方式:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/d8104/http1.1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACMUlEQVQ4y22T627bMAyF/f5vtQ7bn17QAVubtWuQtPAljiRfYsmyJPsbZKdeipUAQUFHOjykqGS/3+Od593SNENKibWW3W5PCOOKZWmGuMC8D/P+OE5kaU6aZSRK9jz8Knh+OrJ5PJCleiURwvyHjeOCyRnL+fMs2TyWHA6WaZpInAt0XY/uLFpblGpmBdGc83SdQUfXPUrVK2ZMT6Vq6rqlbTuKvMANliSEIV5lmmL0aF3T9+ZMOMyKxnEpTesO2/cXWJhjcJaX/MixG0i6LuV1/5X97jvbly+c2t/AdCbQDMOAcw7vHa3uGcKCNc0J7yH4idiErmwwsiFpmtjDN542GZvHlDxr8d4TQphj7Ms4TUzBU+rFGUe0lhiTorsU3eeELgdrSeILXdrRwLao6NqGvu8xxmBtv5ToHUoIqrplmiRK3SPED6S8x4U3IlVirWQYdgzD6xxtOKDtQPCe8X1izjmH7IgrDsQhG8NHIfFs7HfSNoK72yvubr9xc31FUWzXQ8YU1PUDSj0g5U+cfWM6Z1naMa4eH2gmNCagpKeuPFU1oooTobfnS/HF92j9itY7QijXOQxh6W/0ReG4EMZMlxaEYFLVsvbjp2UthOFzQmtzpLymLG8Q4gbntnMJsW9RxaUtpf0r+WOyVWH8BcfZT6cD1lYL4fmStcscxnmMfqko4nEv/p53xUnXaYSo5i8kZU1VNauKeLAsj9R1jRBijovSpdS2bVFKURTFTBztLx0sO2zf7MD4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"http 1.1 三种连接模式\"\n        title=\"http 1.1 三种连接模式\"\n        src=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/00d43/http1.1.png\"\n        srcset=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/63868/http1.1.png 250w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/0b533/http1.1.png 500w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/00d43/http1.1.png 1000w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/d8104/http1.1.png 1365w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>短连接模式(Short-lived Connection): Connection: close</p>\n</li>\n<li>\n<p>长连接模式(Persistent Connection): 长连接模式能减少TCP传输慢启动和握手时间</p>\n<pre><code>  Connection: keep-alive // 长连接\n  Keep-Alive: timeout=5, max=1000 // 连接时间\n</code></pre>\n</li>\n<li>\n<p>管道模式(Pipelining): 在建立的一个连接上发送多个请求不必等到上个结果返回，返回结果需要按照发送的顺序返回，Pipelining模式需要逐个响应存在队首阻塞问题、易被攻击等问题，已被http2的多路复用所替代</p>\n</li>\n</ul>\n<h3>http2</h3>\n<p>http2通过二进制分帧层，将需要发送的数据拆分成帧，通过帧的首部的流标识信息组装成信息。\n<img src=\"./baseWebSummary/binaryFrame.svg\" alt=\"二进制分帧层\"></p>\n<p>http2对比http1.1有如下的优势:</p>\n<ul>\n<li>报头压缩 在HTTP2中使用首部表来跟踪和存储之前发送的键值对。相同的数据不会在每次请求和响应中发送，新的首部键追加到末尾或者替换之前的值。减少冗余数据的发送</li>\n<li>多路复用 在同一个连接上处理请求和响应，根据帧首部的流标识在服务端进行重组</li>\n<li>可以设置请求优先级</li>\n<li>可以实现服务端推送</li>\n</ul>\n<h2>浏览器渲染原理</h2>\n<ol>\n<li>导航(navigation)</li>\n<li>DNS查询</li>\n<li>建立TCP(三次握手) TLS协商(可选)</li>\n<li>响应阶段 TCP慢启动 拥塞控制等</li>\n<li>浏览器解析阶段 浏览器通过将网络接收到的数据转换成DOM和CSSOM，最后渲染器通过DOM树和CSSOM树将内容渲染到页面上\n<ul>\n<li>构建DOM树</li>\n<li>构建CSSOM树</li>\n<li>预加载扫描器 解析DOM占用主线程，预加载扫描器可以提前扫描解析到的内容进行资源请求</li>\n</ul>\n</li>\n<li>渲染阶段 将创建的CSSOM树和DOM树合成Render树，然后计算可见元素的布局渲染到屏幕上\n<ul>\n<li>Style 只计算可见元素 这里display:none不会被计算，visibility: hidden 在计算在render树上</li>\n<li>Layout 从根节点开始计算布局</li>\n<li>Paint 在图层上绘制DOM元素</li>\n<li>Composite(渲染层合并) 按照顺序合并图层并渲染到屏幕上</li>\n</ul>\n</li>\n</ol>\n<p>回流(重排)指Render Tree中部分或者全部元素的尺寸发生改变，浏览器需要重新渲染部分或者全部文档的过程<br>\n可以通过css相关属性，让对应的元素渲染在自己的图层上，减少整体的重排</p>\n<h2>参考</h2>\n<p><a href=\"https://www.cnblogs.com/chyingp/p/websocket-deep-in.html\">WebSocket协议：5分钟从入门到精通 </a><br>\n<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work\">渲染页面：浏览器的工作原理</a><br>\n<a href=\"https://lz5z.com/Web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-CSS3%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F/\">Web 性能优化-CSS3 硬件加速(GPU 加速)</a></p>","fields":{"readingTime":{"text":"17 min read"}},"frontmatter":{"title":"前端网络基础梳理","date":"2023-08-01","tags":"计算机基础","path":"/base-web-summary","top":null,"summary":null}}},{"node":{"id":"a1e61cce-6af5-5210-a1d9-45d04f2a460b","html":"<p>本文整体记录自己在优化项目代码的思路和实现过程，主要从以下的方面展开:</p>\n<ul>\n<li>项目背景(技术方案，迭代上遇到的问题)</li>\n<li>优化方法</li>\n<li>过程的总结思考</li>\n</ul>\n<h2>项目背景</h2>\n<p>页面的整体结构可以简化成如下的结构:</p>\n<ul>\n<li>顶部数据筛选区, 筛选数据变化触发表格数据更新</li>\n<li>数据表格渲染区域</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/c9e36ca5a25f71cb3578f66d35990fef/5112c/pageStruct.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB7cTRoF//xAAXEAEBAQEAAAAAAAAAAAAAAAAAEQES/9oACAEBAAEFAusdYqJiP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/AYf/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAARARMVFh/9oACAEBAAE/IYCrwU0chIf/2gAMAwEAAgADAAAAENcf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EC4//8QAGxABAAICAwAAAAAAAAAAAAAAAQAhETFBwfD/2gAIAQEAAT8Qw07IZnkha0i69p4MKUT/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"页面结构\"\n        title=\"页面结构\"\n        src=\"/blog/static/c9e36ca5a25f71cb3578f66d35990fef/a2510/pageStruct.jpg\"\n        srcset=\"/blog/static/c9e36ca5a25f71cb3578f66d35990fef/0479a/pageStruct.jpg 250w,\n/blog/static/c9e36ca5a25f71cb3578f66d35990fef/41099/pageStruct.jpg 500w,\n/blog/static/c9e36ca5a25f71cb3578f66d35990fef/a2510/pageStruct.jpg 1000w,\n/blog/static/c9e36ca5a25f71cb3578f66d35990fef/5112c/pageStruct.jpg 1149w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n在业务迭代中,单表格形式在承接多版本业务迭代的时候会出现以下的问题:</p>\n<ol>\n<li>表格组件多版本逻辑混杂且分散，缺少层次在迭代中极易出现线上case</li>\n<li>封装的组件或者业务逻辑在后续的迭代中扩展性差</li>\n<li>store方案基于useReducer方案，存在模版代码重复和数据隔离差的问题</li>\n</ol>\n<h2>优化思路&#x26;思考</h2>\n<h3>基础组件功能分层</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 789px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/6319b389a11d022db343f1d44ae4e18c/0f840/adapterComponent.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.799999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG6AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAAWER/9oACAEBAAE/IUqJUyn/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAQABPxBlvBlvBsP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"功能组件分层\"\n        title=\"功能组件分层\"\n        src=\"/blog/static/6319b389a11d022db343f1d44ae4e18c/0f840/adapterComponent.jpg\"\n        srcset=\"/blog/static/6319b389a11d022db343f1d44ae4e18c/0479a/adapterComponent.jpg 250w,\n/blog/static/6319b389a11d022db343f1d44ae4e18c/41099/adapterComponent.jpg 500w,\n/blog/static/6319b389a11d022db343f1d44ae4e18c/0f840/adapterComponent.jpg 789w\"\n        sizes=\"(max-width: 789px) 100vw, 789px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n在基础组件上增加一层业务处理层，对组件需要的基础属性进行分版本处理从而达到相关逻辑清晰分层</p>\n<h3>业务组件功能分层</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/8935d63eeb81352a5e1cecd16a324ccf/4cc1c/entryComponent.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3gSD/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxABAQEBAAAAAAAAAAAAAAAAAAERIf/aAAgBAQABPyHq6j//2gAMAwEAAgADAAAAEIAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRAAAwADAAAAAAAAAAAAAAAAADFBEXGh/9oACAEBAAE/EFhpwJen/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"业务组件分层\"\n        title=\"业务组件分层\"\n        src=\"/blog/static/8935d63eeb81352a5e1cecd16a324ccf/a2510/entryComponent.jpg\"\n        srcset=\"/blog/static/8935d63eeb81352a5e1cecd16a324ccf/0479a/entryComponent.jpg 250w,\n/blog/static/8935d63eeb81352a5e1cecd16a324ccf/41099/entryComponent.jpg 500w,\n/blog/static/8935d63eeb81352a5e1cecd16a324ccf/a2510/entryComponent.jpg 1000w,\n/blog/static/8935d63eeb81352a5e1cecd16a324ccf/4cc1c/entryComponent.jpg 1069w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n业务组件通过组件分发逻辑达到不同版本组件的展示，从而达到</p>\n<h3>逻辑聚合</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 505px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/e4027d5e62a73f51631b7d6c798747b8/95009/aggregation.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 162%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAgABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd9SyhBFKhgH/8QAGRAAAgMBAAAAAAAAAAAAAAAAARAAEUEx/9oACAEBAAEFAoVp4JtLV//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CT//EABwQAAMAAwADAAAAAAAAAAAAAAABESExQRBRwf/aAAgBAQABPyGr2aUQ50T0IksDmHNDSYwJDuXwdmvH/9oADAMBAAIAAwAAABAwDwz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAgEAEAAwABAwUAAAAAAAAAAAABABEhMRBBYVFxkaGx/9oACAEBAAE/ENKp8y4rYCu1Chv7cGHHX7hStFaVCIrDzG7HVr3e0uHQEslByt+sWA4EhJHd56f/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"逻辑聚合\"\n        title=\"逻辑聚合\"\n        src=\"/blog/static/e4027d5e62a73f51631b7d6c798747b8/95009/aggregation.jpg\"\n        srcset=\"/blog/static/e4027d5e62a73f51631b7d6c798747b8/0479a/aggregation.jpg 250w,\n/blog/static/e4027d5e62a73f51631b7d6c798747b8/41099/aggregation.jpg 500w,\n/blog/static/e4027d5e62a73f51631b7d6c798747b8/95009/aggregation.jpg 505w\"\n        sizes=\"(max-width: 505px) 100vw, 505px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n通过工具函数、关键节点(初始化入口/请求api)逻辑约束，减少业务中的数据处理转化逻辑，达到逻辑聚合的目的</p>\n<h3>store设计</h3>\n<p>引入mobx设计新的store方案\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/8b708e6a973434fb54b5650a1196ea2a/f7fe6/storeStruct.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.19999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3gUH/8QAFRABAQAAAAAAAAAAAAAAAAAAASD/2gAIAQEAAQUCa//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQEAAwAAAAAAAAAAAAAAAAEAEBEx/9oACAEBAAE/IeIwgRav/9oADAMBAAIAAwAAABCDD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAMAAwEAAAAAAAAAAAAAAAABESExUZH/2gAIAQEAAT8QabQuZdKuoUWeEOYpHD//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"store设计\"\n        title=\"store设计\"\n        src=\"/blog/static/8b708e6a973434fb54b5650a1196ea2a/a2510/storeStruct.jpg\"\n        srcset=\"/blog/static/8b708e6a973434fb54b5650a1196ea2a/0479a/storeStruct.jpg 250w,\n/blog/static/8b708e6a973434fb54b5650a1196ea2a/41099/storeStruct.jpg 500w,\n/blog/static/8b708e6a973434fb54b5650a1196ea2a/a2510/storeStruct.jpg 1000w,\n/blog/static/8b708e6a973434fb54b5650a1196ea2a/f7fe6/storeStruct.jpg 1258w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\nstore按照共享数据store、多列表store、子功能store。在列表store的设计上可以通过继承基础store来定义通过的接口,对于旧的store提供入口与新store完成信息同步</p>\n<h2>对封装的思考</h2>\n<p>在业务迭代比较频繁的模块，可以通过封装简单的util函数来达到代码的复用能力。在业务初期对业务模块封装有可能导致业务迭代中代码可理解性、可维护性下降。 比较好的思路是在业务比较稳定的时候再对业务逻辑进行封装，通过入口划分不同的业务实现。</p>\n<p>以上就是自己在业务代码优化上的一些实践和思考。代码的优化并不是一蹴而就的，是渐进式的。最开始的设计相当于建筑的地基，这个地基的好坏能一定程度上为项目保驾护航。代码的优化则是自身对业务理解梳理，对功能实现的总结思考，相当于对建筑的添砖加瓦，是个有意思的过程。</p>","fields":{"readingTime":{"text":"4 min read"}},"frontmatter":{"title":"记一次项目代码优化","date":"2023-07-26","tags":"工程化","path":"/code-refactor","top":null,"summary":null}}}],"pathPrefix":"","first":true,"last":false,"index":1,"pageCount":15,"additionalContext":{"pageAllCount":90}}},"staticQueryHashes":[]}