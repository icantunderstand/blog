{
    "componentChunkName": "component---src-templates-index-js",
    "path": "/3",
    "result": {"pageContext":{"pageAllCount":91,"group":[{"node":{"id":"ac69ccad-c7bf-57af-9d78-a08888080dee","html":"<h2><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\">WebSocket</a></h2>\n<p>WebSocket建立在TCP协议之上，通过HTTP协议完成握手升级。默认端口80(ws)和443(wss),没有同源限制</p>\n<ol>\n<li>\n<p>WebSocket支持双向通信，在实时性要求更高的场景更合适。</p>\n</li>\n<li>\n<p>二进制支持更好</p>\n</li>\n<li>\n<p>传输开销少，相对于HTTP传输头部数据更少</p>\n</li>\n<li>\n<p>支持扩展,可以实现自定义的子协议</p>\n<pre><code> // 创建连接\n const socket = new WebSocket(\"ws://localhost:8080\");\n // 监听open事件发送消息\n socket.addEventListener(\"open\", (event) => {\n     socket.send(\"Hello Server!\");\n });\n // 监听message事件接收消息\n socket.addEventListener(\"message\", (event) => {\n     console.log(\"Message from server \", event.data);\n });\n</code></pre>\n</li>\n</ol>\n<h3>websocket属性</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n<th>值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WebSocket.binaryType</td>\n<td>数据传输格式</td>\n<td>'blob'(默认)/'arraybuffer'</td>\n</tr>\n<tr>\n<td>WebSocket.readyState</td>\n<td>WebSocket连接状态</td>\n<td>CONNECTING/0-连接中 OPEN/1-打开，可以发送消息  CLOSING/2-关闭中 CLOSED/3-关闭态或者不能被打开</td>\n</tr>\n<tr>\n<td>WebSocket.bufferedAmount</td>\n<td>返回没有被传输到服务端的入队数据</td>\n<td>只读值</td>\n</tr>\n</tbody>\n</table>\n<h3>实例方法</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WebSocket.close()</td>\n<td>关闭连接</td>\n</tr>\n<tr>\n<td>WebSocket.send()</td>\n<td>将数据送进发送队列等待发送</td>\n</tr>\n</tbody>\n</table>\n<h3>事件</h3>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>close</td>\n<td>断开连接的时候触发</td>\n</tr>\n<tr>\n<td>error</td>\n<td>因为错误而断开连接出发</td>\n</tr>\n<tr>\n<td>message</td>\n<td>接收消息触发</td>\n</tr>\n<tr>\n<td>open</td>\n<td>链接建立触发</td>\n</tr>\n</tbody>\n</table>\n<h3>建立连接(握手过程)</h3>\n<ol>\n<li>\n<p>客户端申请协议升级</p>\n<pre><code> GET ws://example.com/ HTTP/1.1  \n Connection: Upgrade  //升级协议\n Upgrade: websocket  // 升级websocket\n Origin: http://example.com  \n Sec-WebSocket-Version: 13  // 指定websocket版本 如果服务端不支持服务端会返回支持的版本\n Sec-WebSocket-Key: d4egt7snxxxxxx2WcaMQlA==  // 与服务端的返回头Sec-WebSocket-Accept相匹配，提供保护防止恶意连接等\n</code></pre>\n</li>\n<li>\n<p>服务端响应协议升级</p>\n<pre><code> HTTP/1.1 101 Switching Protocols // 101切换协议\n Connection:Upgrade\n Upgrade: websocket\n Sec-WebSocket-Accept: Oy4NRAQ13jhfONC7bP8dTKb4PTU= // 根据请求Sec-WebSocket-key生成\n</code></pre>\n</li>\n</ol>\n<h3>连接保持</h3>\n<ol>\n<li>发送方->接收方：ping</li>\n<li>接收方->发送方：pong</li>\n</ol>\n<h2>三次握手</h2>\n<p>通过三次握手建立TCP连接，三次握手为了确认双方传输的序列号\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 745px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPElEQVQ4y21Ty07jMBSN+CF2iK/gQ/gdliyQumEkxKpUHakwmpRFxDNNUlJFQigPMrRJWgfHaRLH8R3BRaYwc1b29X2dc681AJBSAsBqtTo8PDw4OCCEKOMmbm9vj46OTNNUFk1KKYRo2xYAtre3d3Z2AKBtW7mBrusAIMuy3d3d8XisHDSsgM/7+/t7e3tFUaBFAVPbtr21taXrOgAIId4qA0BZloQQzvl8PnccJ89zQsi/bQshxuPx6+urIvUW7Pu+bduEEMbYYrFwHKff75v397913TTNNE2rqsLWOOcq11vbm7mbpqmqCs+r5fLx8XHqur90fTgcep6XJEkcx0j4g7MiJqWs67osSyVBJ2WZ56HjZL4/dd2zfv/6+poxZlnWdDrlnGuoR9u2Xdet12tKaVVVrCiuLi6GvV6/17MNw314iOM/nHNKKYqPxTQhBM4DJUmSZDQaDQeDn6enV4bhh2FZfxJWan0EA0CapsvlkjFGKR2NRufn51EUBVGE/HERmqbhnOd5jhaEhrtFCFmv13meB0Hw9PQ0dZwfx8eXl5e2bSdJ0jQNeuMKqCl+UZtzXtc1Tn4+nxuGMRgMTk5OdF2PojBN06Kgm/6a4oCjQrVV7rqugyC4ubmxLOvu7g5H9SnYt8rYIb5hRrUCcRy/vLxg8AfnzTUsy5JS+u1LoSsesiz7D2e8h2HoeR7OTH4FAFBKXddtmka843vbQghK6Ww2WywWz8/Pvu9PJpM4jr13WJbFGNv8sH8BdCuyVQ0e+JcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"三次握手\"\n        title=\"三次握手\"\n        src=\"/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png\"\n        srcset=\"/blog/static/450ef929b273efe5395a856db3581d99/63868/threeShake.png 250w,\n/blog/static/450ef929b273efe5395a856db3581d99/0b533/threeShake.png 500w,\n/blog/static/450ef929b273efe5395a856db3581d99/7e509/threeShake.png 745w\"\n        sizes=\"(max-width: 745px) 100vw, 745px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>客户端在向服务端请求连接的时候，会向服务端发送一个SYN报文段。会随机选取一个client_isn作为序号字段放置在该SYN报文中。</li>\n<li>服务端在收到该报文后，会发送给客户端一个报文并且设置TCP的缓存和变量。该报文的ack字段是client_isn + 1,序号字段为server_isn,SYN比特为设置成1.代表当前服务器已经准备接收数据</li>\n<li>客户端在接收服务端的确认报文后会创建TCP的缓存和变量并且向服务端继续发送报文(此时的报文可以携带上数据),其中ack字段是server_isn + 1,序号字段是client_isn + 1,SYN字段为0(此后的报文中SYN字段都为0).至此TCP连接建立成功。</li>\n</ol>\n<h2>四次挥手</h2>\n<p>通过四次挥手，中断双方的TCP连接。通过四次可以确定双方都可以中断连接\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 340px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACnUlEQVRIx4WVS2pyQRCF7+qyCFcgCK7AUYYhOnfgyEAgDl2BRIMKOjAPiCGaGI3vtyY+ovXzNZS0915/G5qr3V2nTlWdrnZERLbbrfz+/pr59/cn+/2e5cPXHqzp+m63k9lsJtPpVJbLpVl32Oj1elKr1eTj4+PI0A/M/gL49PQkLy8v0m63zZoDO4Cen5+lXC7L29ubrFYrDxs/wE6nI4+Pj5LP58232+2Ks9lsjIdMJiORSEQuLy8PTGHgN3Qd57lcTq6uriQcDsvd3Z04xWJREomExGIxSaVSZhK+bahMbcbNZlOSyaREo1G5vr6Wm5sbSafT4tze3kogEJBgMCj39/fy8PAgk8nEF4ipTkqlkoRCIbm4uJB4PC7ZbNakzcG4UCiYSg2HQ5nP53JquEFRRaVSOVpzKMB6vTZ/+v2+DAYDc3CxWJgvB1utlkm4eyAVdzSOfWA0GhkQNigWzgCGPY5+fn7MRBmcYQ/JHQHaiQYQA/cAkCIgYvYBYb6+vkqj0TgU0AM4Ho8PtwV2ypCQv7+/TX4JU3WKA1+GmlDU/vn5aUAxVPBTgzPk3Rb7EUPyBKNzVdbzhI8y7H0PIF7d1w4VEK4NCHNyXq/XTTo0DY5NlxyqhDQVGCIZDCkOwOSOdCCZ9/d3c1W1mI6CIRM2McQIcK2qtifN59mQVRp0DMIGiAkI4NxtioX+7IYBS9+iaCtCa3ZVMYY5QBQLcDtknGPnkQ2Di03IAJxqsLqOA5XZ19eXPyC5Y9pF8Zv2oLKaQw8gOaT8hOLuzu6urf/dwj4ChBkh24CnGJ4FBIRK8jb87z1xA9qyOWpfhFqtVs0L5s4hldZO4n6sqLz2SU/IDLqvPlCnQraZclP0/fF0G76wRMDnAN2ysn//Aw2QzK7dGbfNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"四次挥手\"\n        title=\"四次挥手\"\n        src=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png\"\n        srcset=\"/blog/static/bfcc2547154c5a74172a41af7cbca7a1/63868/fourClose.png 250w,\n/blog/static/bfcc2547154c5a74172a41af7cbca7a1/9f933/fourClose.png 340w\"\n        sizes=\"(max-width: 340px) 100vw, 340px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>终止方向另一端发送一个TCP报文，其FIN比特位被设置成1</li>\n<li>接收方回复一个ACK报文并且发送一个FIN报文</li>\n<li>终止端回复一个ACK报文，至此两方为了维持TCP连接的缓存和变量都将清除(接受FIN端需要把自己剩余的信息发送完 才能发送FIN报文)</li>\n</ol>\n<h2>TLS握手</h2>\n<p>在使用HTTPS进行通信的时候，会进行TCP握手建立TCP连接，TLS握手完成数据安全的校验才能进行通信\n在TLS握手中主要进行了一下的操作</p>\n<ul>\n<li>指定将要使用的TLS版本</li>\n<li>决定将要使用哪些密码套件</li>\n<li>通过服务器生成的公钥和SSL证书颁发机构的数据签名验证服务器身份</li>\n<li>生成对话密钥，在握手完成后使用</li>\n</ul>\n<h3>TLS握手的过程</h3>\n<ol>\n<li>客户端问候(client hello)消息: 客户端向服务器发送问候消息开始握手，该消息包含客户端支持的TLS版本、支持的密码套件、客户端随机数(client random)</li>\n<li>服务端问候(server hello)消息: 回复客户端问候消息，内含服务端的SSL证书、服务端选择的密码套件、服务端随机数</li>\n<li>身份验证 客户端对服务端的证书进行验证</li>\n<li>预主密钥 客户端在发送一串随机字节即预主密钥(premaster secret)，预主密钥使用公钥(从服务端发送的SSL证书中获取)加密</li>\n<li>解密预主公钥 对预主密钥解密获得客户端随机数</li>\n<li>生成对话密钥 客户端和服务端均使用客户端随机数、服务端随机数和预主密钥生成对话公钥</li>\n<li>客户端就绪</li>\n<li>服务端就绪</li>\n<li>实现安全对称加密，使用对话密钥进行通信</li>\n</ol>\n<h2>图解不同协议</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 418px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB1ZVksAL/xAAZEAEAAwEBAAAAAAAAAAAAAAACARESACL/2gAIAQEAAQUCwtMqVmux6ZmVVd//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAgEAACAAQHAAAAAAAAAAAAAAAAAQIQETEhIkFhcYGR/9oACAEBAAY/AsXF6XdNmamZt9l3TmX/xAAbEAACAgMBAAAAAAAAAAAAAAABEQCRIVHRgf/aAAgBAQABPyEGN7RGFSktCgQnaAvJHmNTNQi7AIJm5//aAAwDAQACAAMAAAAQY9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EJgkof/EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxB0f//EAB0QAQEAAgMAAwAAAAAAAAAAAAERACExUXGRsdH/2gAIAQEAAT8QgkWxY6g1rCTRgfK3W8lVetxbQKooOeI41hNLwr95+sKBe637z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"不同协议\"\n        title=\"不同协议\"\n        src=\"/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg\"\n        srcset=\"/blog/static/49345da67692d6013e53851c0301dc33/0479a/differentProtocol.jpg 250w,\n/blog/static/49345da67692d6013e53851c0301dc33/14429/differentProtocol.jpg 418w\"\n        sizes=\"(max-width: 418px) 100vw, 418px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>常用请求状态码</h2>\n<table>\n<thead>\n<tr>\n<th>状态码值</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>301</td>\n<td>永久重定向 可以SEO，会被浏览器缓存 res.writeHead(301, {'Location': '<a href=\"http://www.baidu.com/&#x27;%7D\">http://www.baidu.com/'}</a>);</td>\n</tr>\n<tr>\n<td>302</td>\n<td>临时重定向</td>\n</tr>\n<tr>\n<td>304</td>\n<td>在缓存协商过程中，304代表客户端可以使用当前的缓存结果</td>\n</tr>\n<tr>\n<td>201</td>\n<td>表示请求已经创建成功并且创建了新的资源，通常作为POST请求的返回值</td>\n</tr>\n<tr>\n<td>204 No Content</td>\n<td>表示请求已经成功，通常用在PUT请求返回中，会返回ETag并且可以被缓存</td>\n</tr>\n<tr>\n<td>401 Unauthorized</td>\n<td>客户端错误，指由于缺乏目标资源要求的身份验证凭证，发送的请求未得到满足</td>\n</tr>\n<tr>\n<td>403 Forbidden</td>\n<td>客户端错误，指服务端有能力处理请求，但是拒绝授权访问</td>\n</tr>\n<tr>\n<td>400 Bad Request</td>\n<td>客户端错误，服务端无法处理该请求</td>\n</tr>\n<tr>\n<td>405 Method Not Allowed</td>\n<td>表明服务器禁止了使用当前HTTP方法</td>\n</tr>\n<tr>\n<td>502</td>\n<td>网关错误</td>\n</tr>\n<tr>\n<td>503 Service Unavailable</td>\n<td>服务不可用</td>\n</tr>\n</tbody>\n</table>\n<h2>前端存储(cookie/localStorage/sessionStorage)</h2>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>生命周期</th>\n<th>大小</th>\n<th>传递方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>cookie</td>\n<td>服务端生成有过期时间</td>\n<td>4K左右</td>\n<td>在通信中都会携带</td>\n</tr>\n<tr>\n<td>localStorage</td>\n<td>存储在本地,长期有效存在同源策略</td>\n<td></td>\n<td>不参与服务端通信</td>\n</tr>\n<tr>\n<td>sessionStorage</td>\n<td>仅在当前会话有效(刷新页面有效),关闭页面失效。有同源策略</td>\n<td>5MB</td>\n<td>不参与服务端通信</td>\n</tr>\n</tbody>\n</table>\n<h3>cookie基础知识</h3>\n<p>cookie通过服务端的set cookie来做用户信息的存储 通常的设置方式如下:</p>\n<pre><code>Set-Cookie: name=value; Expires=Wed, 21 Oct 2019 07:28:00 GMT;\n</code></pre>\n<ol>\n<li>cookie可以设置domain和path\n<ul>\n<li>不同domain的cookie不能共享</li>\n<li>相同domain的不同path下设置的cookie不能共享</li>\n<li>子path可以共享根domain下的cookie</li>\n</ul>\n</li>\n<li>设置HttpOnly能防止cookie被js读取</li>\n<li>设置SameSite可以限制cookie的发送</li>\n<li>在通过XmlHttpRequest跨域请求的时候 设置withCredential: true的时候 会携带cookie，服务端需要设置响应头Access-Control-Allow-Credentials: true 才能拿到响应</li>\n</ol>\n<h2>xss(跨站脚本攻击)</h2>\n<p>xss是一种代码注入攻击。 攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。 利用这些恶意脚本，攻击者可获取用户的敏感信息如Cookie、SessionID 等，进而危害数据安全</p>\n<h2>csrf(跨站请求伪造)</h2>\n<p>跨站请求伪造是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。例如:</p>\n<ol>\n<li>受害者登录a.com，并保留了登录凭证（Cookie)</li>\n<li>攻击者引诱受害者访问了b.com。</li>\n<li>b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。</li>\n<li>a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。</li>\n<li>b.com以受害者的名义执行了act=xx。攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。</li>\n</ol>\n<h3>csrf的防护策略</h3>\n<ul>\n<li>令牌同步模式 服务端生成令牌Token，再次请求的时候携带Token</li>\n<li>检查Referer字段(同源策略)</li>\n<li>SameSite Cookie  将SameSite 设置为Strict或者Lax可以减少CSRF风险 Strict模式可以完全阻止第三方网站访问cookie.Lax模式相对宽松，导航到目标网站的GET请求还是会发送cookie</li>\n</ul>\n<h2>单点登录(Single Sign On)</h2>\n<p>单点登录SSO指在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统\nSSO一般都需要一个独立的认证中心（passport），子系统的登录均得通过passport，子系统本身将不参与登录操作，当一个系统成功登录以后，passport将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自的受保护资源，为了减少频繁认证，各个子系统在被passport授权以后，会建立一个局部会话，在一定时间内可以无需再次向passport发起认证\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 737px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 126.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAADN0lEQVQ4y5VTWY7cRBjum3AQTsMBuAOvnIEDJMATL0wSCSkSgigkg0KGYTJMuttLt5dyuVz7+lcVsj2jWWAE/E+2/H9V3+ZNubs6ffVDcXkanJE+nFD6ddN8YCwDvFXqade9RANAUMwW78n27SSpBQgxxnEcN3woqjdPq5+/ihIPOX+C8eb01y/LKuf8mVKb388//e0sZxgr/90X9Tefo/7K5GU45xslhWJYUiQFV8acU/qeMR5CznkI4UKpo5m3ISSGDOtdcJByyjkzxjbeB82JUtI6l5w7av2yrh2leCLgHGidY0xp3o8JUoo55/n1FsyQ1XIlU8V40rZeCKkVJqRuGkKps84HV23baeBSCi7EDTgERRFn03xmjEUIrwhhfd8PA+fce59SAoCcc79nuw8H67TW+hYsKSLjYJ2P1m61frbbTV2H8NA0DcbYWmuMcd619WCU+zvtQUkOKeUY996/5jynBItUay0AhNm/VF/hP959xCMSt7QXsNFi1VwCvJGz/ri8wmL7elVf8Muz/Ugw6tF1VA/AFcBPhOSlByEEjHEIYdGc2j0tr1omKCHkEXCMP2KcrZVa931XV1WPkNbGB3csey3tP2i+S/u1EDmlEKNzbrbKOYBZRLufij+PTNA7bt+A59PSDP5l8WPRnIwxKaUU54/tll282xEyIDQIISila8Pw3ZI8Pxw851JrJWXXddbaECDliBvOic45BR9SjGvOICmiBJNp0pQWzp00jed8JERJmRd56wBAjA/qGYJiM1hrbY3GnB3GMQEEAGPMDuN7YJjDv28YH7S6NmzOx7mYUgTIKT+pD2Vdl0VBCDHGrD191O0Y47qxzvfTxNjcdCFZ/RE1JVJKPNqwh2BCvHOETBDDUItjMfhg16j4fwH3Xde2Xdu1xfagpfsftJ8zlq8Nyt2eXZ7t8ThQSlNK/w5+RmmKkXORcuz27Oq8UlpM03RdEue8okhLvvK5+QHzGum3TdP1PUJoohMZuNX+Hm2AqDmWgq1XUTrhJdt148U4Wu+DnydGWENOy7lCiE1VVcfjoWmO7TJN0xyPN89tWxwOqL+epmnqqt7tdrvttizLi4uLvwCQgY3VfIS/ggAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sso\"\n        title=\"sso\"\n        src=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png\"\n        srcset=\"/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/63868/sso.png 250w,\n/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/0b533/sso.png 500w,\n/blog/static/64817061d63be0dcfe8814e4c0bc4b7a/d125e/sso.png 737w\"\n        sizes=\"(max-width: 737px) 100vw, 737px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>跨域资源共享（Cross-origin resource sharing）</h2>\n<p>跨域资源共享是W3C标准，规定了浏览器和服务器可以通过交互来确认跨域请求是否安全的方式。</p>\n<h3>跨域的条件</h3>\n<p>端口、域名、协议不同为跨域请求</p>\n<h3>跨域请求分类</h3>\n<ol>\n<li>简单请求\n<ul>\n<li>请求方法是： HEAD/GET/POST</li>\n<li>请求头是: Accept/Accept-Language/Content-Language/Content-Type（需要注意额外的限制）/Range</li>\n<li>Content-Type 标头所指定的媒体类型的值仅限于: text/plain multipart/form-data application/x-www-form-urlencoded</li>\n</ul>\n</li>\n<li>复杂请求 非简单请求，在进行跨端请求的时候 需要发送预检(OPTION)请求</li>\n</ol>\n<h3>跨域请求交互</h3>\n<h4>简单请求跨域交互</h4>\n<p>请求端请求头:</p>\n<pre><code>GET /resources/public-data/ HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example  // 标识请求来源\n</code></pre>\n<p>服务端响应头:</p>\n<pre><code>HTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 00:23:53 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: * // 告知浏览器该资源可以被哪些域名访问\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nTransfer-Encoding: chunked\nContent-Type: application/xml\n</code></pre>\n<h4>复杂请求跨域交互</h4>\n<p>请求端预检请求</p>\n<pre><code>OPTIONS /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example\nAccess-Control-Request-Method: POST // 跨域请求方法\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type // 跨域请求的自定义请求头\n</code></pre>\n<p>服务端响应预检请求</p>\n<pre><code>HTTP/1.1 204 No Content\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\nVary: Accept-Encoding, Origin\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\n</code></pre>\n<p>在完成预检请求后进行正常的请求交互响应</p>\n<h4>跨域解决方案</h4>\n<ul>\n<li>CROS 通过设置响应头Access-Control-Allow-Origin字段允许跨域请求</li>\n<li>JSONP 通过动态script标签实现跨域数据获取</li>\n<li>代理 通过代理服务器转发请求</li>\n<li>WebSocket协议 使用WebSocket协议通信</li>\n</ul>\n<h2>TCP/UDP</h2>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>连接性</th>\n<th>可靠性</th>\n<th>相关协议应用层协议</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>TCP</td>\n<td>面向连接</td>\n<td>可靠</td>\n<td>http/https/ftp/telnet</td>\n</tr>\n<tr>\n<td>UDP</td>\n<td>无连接可直接发送数据</td>\n<td>不可靠，容易丢包报文乱序等</td>\n<td>dns/tftp</td>\n</tr>\n</tbody>\n</table>\n<h2>http 1.1</h2>\n<p>超文本传输协议(HyperText Transfer Protocol-http)\nhttp1.1三种连接方式:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/d8104/http1.1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACMUlEQVQ4y22T627bMAyF/f5vtQ7bn17QAVubtWuQtPAljiRfYsmyJPsbZKdeipUAQUFHOjykqGS/3+Od593SNENKibWW3W5PCOOKZWmGuMC8D/P+OE5kaU6aZSRK9jz8Knh+OrJ5PJCleiURwvyHjeOCyRnL+fMs2TyWHA6WaZpInAt0XY/uLFpblGpmBdGc83SdQUfXPUrVK2ZMT6Vq6rqlbTuKvMANliSEIV5lmmL0aF3T9+ZMOMyKxnEpTesO2/cXWJhjcJaX/MixG0i6LuV1/5X97jvbly+c2t/AdCbQDMOAcw7vHa3uGcKCNc0J7yH4idiErmwwsiFpmtjDN542GZvHlDxr8d4TQphj7Ms4TUzBU+rFGUe0lhiTorsU3eeELgdrSeILXdrRwLao6NqGvu8xxmBtv5ToHUoIqrplmiRK3SPED6S8x4U3IlVirWQYdgzD6xxtOKDtQPCe8X1izjmH7IgrDsQhG8NHIfFs7HfSNoK72yvubr9xc31FUWzXQ8YU1PUDSj0g5U+cfWM6Z1naMa4eH2gmNCagpKeuPFU1oooTobfnS/HF92j9itY7QijXOQxh6W/0ReG4EMZMlxaEYFLVsvbjp2UthOFzQmtzpLymLG8Q4gbntnMJsW9RxaUtpf0r+WOyVWH8BcfZT6cD1lYL4fmStcscxnmMfqko4nEv/p53xUnXaYSo5i8kZU1VNauKeLAsj9R1jRBijovSpdS2bVFKURTFTBztLx0sO2zf7MD4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"http 1.1 三种连接模式\"\n        title=\"http 1.1 三种连接模式\"\n        src=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/00d43/http1.1.png\"\n        srcset=\"/blog/static/583815188e73a6411f8f33d3299ad0b8/63868/http1.1.png 250w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/0b533/http1.1.png 500w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/00d43/http1.1.png 1000w,\n/blog/static/583815188e73a6411f8f33d3299ad0b8/d8104/http1.1.png 1365w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>短连接模式(Short-lived Connection): Connection: close</p>\n</li>\n<li>\n<p>长连接模式(Persistent Connection): 长连接模式能减少TCP传输慢启动和握手时间</p>\n<pre><code>  Connection: keep-alive // 长连接\n  Keep-Alive: timeout=5, max=1000 // 连接时间\n</code></pre>\n</li>\n<li>\n<p>管道模式(Pipelining): 在建立的一个连接上发送多个请求不必等到上个结果返回，返回结果需要按照发送的顺序返回，Pipelining模式需要逐个响应存在队首阻塞问题、易被攻击等问题，已被http2的多路复用所替代</p>\n</li>\n</ul>\n<h2>http2</h2>\n<p>http2通过二进制分帧层，将需要发送的数据拆分成帧，通过帧的首部的流标识信息组装成信息。\n<img src=\"./baseWebSummary/binaryFrame.svg\" alt=\"二进制分帧层\"></p>\n<p>http2对比http1.1有如下的优势:</p>\n<ul>\n<li>报头压缩 在HTTP2中使用首部表来跟踪和存储之前发送的键值对。相同的数据不会在每次请求和响应中发送，新的首部键追加到末尾或者替换之前的值。减少冗余数据的发送</li>\n<li>多路复用 在同一个连接上处理请求和响应，根据帧首部的流标识在服务端进行重组</li>\n<li>可以设置请求优先级</li>\n<li>可以实现服务端推送</li>\n</ul>\n<h2>http2升级</h2>\n<ul>\n<li>服务器软件升级和配置</li>\n<li>TSL/SSL加密</li>\n<li>客户端支持</li>\n<li>代理服务器的升级与配置</li>\n</ul>\n<h2>http3</h2>\n<p>http3是基于QUIC协议的，他有延续了http2的一些优势，比如多路复用，头部压缩等，由于QUIC是基于UDP协议之上的，相对http2在连接建立、头部阻塞上有有优势</p>\n<h2>浏览器渲染原理</h2>\n<ol>\n<li>导航(navigation)</li>\n<li>DNS查询</li>\n<li>建立TCP(三次握手) TLS协商(可选)</li>\n<li>响应阶段 TCP慢启动 拥塞控制等</li>\n<li>浏览器解析阶段 浏览器通过将网络接收到的数据转换成DOM和CSSOM，最后渲染器通过DOM树和CSSOM树将内容渲染到页面上\n<ul>\n<li>构建DOM树</li>\n<li>构建CSSOM树</li>\n<li>预加载扫描器 解析DOM占用主线程，预加载扫描器可以提前扫描解析到的内容进行资源请求</li>\n</ul>\n</li>\n<li>渲染阶段 将创建的CSSOM树和DOM树合成Render树，然后计算可见元素的布局渲染到屏幕上\n<ul>\n<li>Style 只计算可见元素 这里display:none不会被计算，visibility: hidden 在计算在render树上</li>\n<li>Layout 从根节点开始计算布局</li>\n<li>Paint 在图层上绘制DOM元素</li>\n<li>Composite(渲染层合并) 按照顺序合并图层并渲染到屏幕上</li>\n</ul>\n</li>\n</ol>\n<p>回流(重排)指Render Tree中部分或者全部元素的尺寸发生改变，浏览器需要重新渲染部分或者全部文档的过程<br>\n可以通过css相关属性，让对应的元素渲染在自己的图层上，减少整体的重排</p>\n<h2>web性能指标</h2>\n<table>\n<thead>\n<tr>\n<th>名字</th>\n<th>连接性</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>首次有效绘制时间(FMP)</td>\n<td>浏览器首次绘制主要内容的时间点</td>\n</tr>\n<tr>\n<td>可交互时间(TTI)</td>\n<td>页面可交互时间</td>\n</tr>\n<tr>\n<td>首次内容渲染时间(FCP)</td>\n<td>浏览器首次绘制来自DOM内容的时间点</td>\n</tr>\n<tr>\n<td>页面完全加载时间(Load Time)</td>\n<td>页面上所有资源加载完成并且 DOM 加载完毕的时间点</td>\n</tr>\n</tbody>\n</table>\n<h2>参考</h2>\n<p><a href=\"https://www.cnblogs.com/chyingp/p/websocket-deep-in.html\">WebSocket协议：5分钟从入门到精通 </a><br>\n<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work\">渲染页面：浏览器的工作原理</a><br>\n<a href=\"https://lz5z.com/Web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-CSS3%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F/\">Web 性能优化-CSS3 硬件加速(GPU 加速)</a></p>","fields":{"readingTime":{"text":"19 min read"}},"frontmatter":{"title":"前端网络基础梳理","date":"2023-08-01","tags":"计算机基础","path":"/base-web-summary","top":null,"summary":null}}},{"node":{"id":"b291531c-f09d-5949-920b-5523a387a6ab","html":"<h2><a href=\"https://frontendmastery.com/posts/rethinking-react-best-practices/\">Rethinking React best practices</a></h2>\n<p>这篇文章介绍React发展的过程，从SPA的方式开始，讲述SPA存在的一些问题，然后React在服务端有一些尝试为了解决SPA的问题，引入Suspense、流式渲染、React Server Component等。在文章开头对软件开发中的问题的描述很有意思: 人的问题&#x26;技术的问题。非常不错的文章</p>\n<h2><a href=\"https://www.jvandemo.com/a-10-minute-primer-to-javascript-modules-module-formats-module-loaders-and-module-bundlers/\">A 10 minute primer to JavaScript modules, module formats, module loaders and module bundlers</a></h2>\n<p>这篇文章简要的介绍了JavaScript中模块的发展历史，包括IIFE、AMD、CMD、UMD、System.register、ES6模块等</p>\n<h2><a href=\"https://www.honeybadger.io/blog/javascript-regular-expressions/\">Regular expressions in JavaScript</a></h2>\n<p>这篇文章介绍JavaScript中的正则表法式，详细的介绍了正则表达式的创建、使用、匹配等</p>\n<h2><a href=\"https://www.bbss.dev/posts/eventloop/\">Practical Guide To Not Blocking The Event Loop</a></h2>\n<p>文章通过在node服务器中一个长时间执行任务阻断后续请求的例子来讲解如何防止阻塞时间循环，文中的配图通俗易懂\nwoqu</p>\n<h2>工具</h2>\n<h3><a href=\"https://github.com/FormidableLabs/react-live\">react-live</a></h3>\n<p>一个实现预览react组件代码的库</p>\n<h3><a href=\"https://webcontainers.io/\">Dev environments.In your web app</a></h3>\n<p>可以在浏览器环境中运行node的工具</p>\n<h3><a href=\"https://shoelace.style/\">Shoelace</a></h3>\n<p>web components组件库</p>\n<h3><a href=\"https://github.com/typicode/lowdb\">lowdb</a></h3>\n<p>一个JSON存储数据库，支持在node/浏览器环境中使用</p>\n<h2><a href=\"https://github.com/hakimel/reveal.js\">reveal.js</a></h2>\n<p>一个实现网页演示文稿的工具</p>","fields":{"readingTime":{"text":"2 min read"}},"frontmatter":{"title":"2023-5-1-前端快报","date":"2023-05-01","tags":"前端快报","path":"/2023-5-1","top":null,"summary":null}}},{"node":{"id":"8db958ce-ae0c-50fa-aa5a-8a3813929e62","html":"<p>h5性能优化可以总结为如下的几个方向:</p>\n<ul>\n<li>将请求时间线上的行为提前执行</li>\n<li>将请求时间线上不紧急的后置</li>\n<li>将资源从最近的位置提供给页面</li>\n</ul>\n<p>在讨论h5加载性能的时候主要有以下角色:</p>\n<ul>\n<li>Native容器</li>\n<li>用户(开发的视角)</li>\n<li>服务端(数据/页面)</li>\n<li>h5页面</li>\n</ul>\n<p>本文会结合优化的方向从不同角色的角度总结h5优化的一些通用方案。</p>\n<h2>Native容器优化</h2>\n<ul>\n<li>Webview池 通过提前初始Webview和Webview复用降低Webview初始化时间</li>\n<li><a href=\"https://icantunderstand.github.io/blog/cross-platform-prefetch\">数据预取</a> 容器侧提供数据预取能力，提前数据加载</li>\n<li>DNS连接 容器提前建立与h5页面相同域名的DNS链接</li>\n<li><a href=\"https://icantunderstand.github.io/blog/cross-platform-offline\">离线包</a> 通过离线包可以直接加载提前下载好的本地资源展示</li>\n</ul>\n<h2>h5页面内优化</h2>\n<ul>\n<li>预连接 dns-prefetch, preconnect</li>\n<li>资源包拆分 框架和业务代码进行拆包，框架层使用更长的缓存策略来减少框架代码的请求</li>\n<li>页面资源加载 图片懒加载、路由懒加载、小图内联、模块动态加载</li>\n<li>js执行优化 缓存计算结果、WebWorker、GPU渲染、长列表优化</li>\n<li>脚本标签优化\n<ol>\n<li>defer 等待html解析完毕后执行 多个defer文件按顺序执行</li>\n<li>async 下载后立即执行无顺序</li>\n</ol>\n</li>\n</ul>\n<h2>服务端优化</h2>\n<ul>\n<li>api聚合服务 前端侧可以通过一个请求聚合多个后端请求，后端在内网完成数据的聚合</li>\n<li>CDN容灾策略</li>\n<li>预渲染技术\n<ol>\n<li><a href=\"https://www.patterns.dev/posts/server-side-rendering\">SSR</a>(server-side rendering)服务端渲染,在服务端完成数据请求和html内容的生成返回给用户</li>\n<li><a href=\"https://www.patterns.dev/posts/static-rendering\">SSG</a>(static site generation)静态页面生成，SSG主要用于生成静态的网站比如博客等</li>\n<li><a href=\"https://www.patterns.dev/posts/incremental-static-rendering\">ISR</a>（Incremental Static Generation)渐进式静态内容生成，可以增量的方式在服务端生成新的内容和替换已有内容，对SSG的一种补充</li>\n<li><a href=\"https://www.patterns.dev/posts/react-selective-hydration\">Selective Hydration</a> 可选的注水 通过Suspense和pipeToNodeStream流式输入实现可选注水</li>\n<li><a href=\"https://www.patterns.dev/posts/islands-architecture\">Islands Architecture</a> 孤岛架构,可以实现静态和动态内容的分离渲染，可以对组件渲染更细粒度的控制</li>\n</ol>\n</li>\n</ul>\n<h2>用户</h2>\n<ul>\n<li>功能取舍 低端机放弃一些功能保证页面更流畅</li>\n<li>骨架屏 使用骨架屏在数据未返回时给用户更好的体验</li>\n<li><a href=\"https://blog.ihanai.com/2020/12/comparison-of-solution-for-same-layer-render.html\">同层渲染</a></li>\n</ul>\n<h2>参考</h2>\n<p><a href=\"https://tech.meituan.com/2017/06/09/webviewperf.html\">WebView性能、体验分析与优化</a>\n<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work\">渲染页面：浏览器的工作原理</a>\n<a href=\"https://blog.ihanai.com/2020/12/comparison-of-solution-for-same-layer-render.html\">同层渲染方案比较</a></p>","fields":{"readingTime":{"text":"4 min read"}},"frontmatter":{"title":"web性能优化总结","date":"2023-03-15","tags":"跨端技术","path":"/h5-performance","top":null,"summary":null}}},{"node":{"id":"c0b8240b-60ad-5807-ab22-6ef623c38f71","html":"<p>在维护大型项目的时候，随着项目功能的迭代会出现委会的一些痛点，比如</p>\n<ul>\n<li>页面打包、开发启动过程慢，模块间逻辑冗余，模块间功能依赖导致牵一发而动全身</li>\n<li>项目规范难以实行，不同模块同学开发的代码理解成本大</li>\n<li>功能和逻辑共享问题</li>\n</ul>\n<p>本文在以上问题的基础上，梳理自己对项目维护的一点思考</p>\n<h2>重新认识项目</h2>\n<p>不同的项目类型决定了项目不同的技术方案和业务发展模式，当前对项目维护上的一些决策是可以结合到当前的现状和未来的业务发展做提前规划的。比如在C端项目中会侧重于用户侧的性能和体验的探索，那么在技术方案上就会比较激进，要考虑好方案的回退等。在B端项目侧重于稳定性、功能流程的完善性，单个项目周期较长。长期项目和短期项目的思考点又有些不同。如果项目是作为服务模块提供给使用者，这个使用者可以是我们自身或者业务同事，那么就需要思考如何在不影响原有的架构模式上提供服务。</p>\n<h3>项目的组织方式</h3>\n<p>这里谈的是项目的拆分和聚合。可以通过monorepo的方式把依赖项目管理起来或者把不长维护的模块拆分出去。通用的模块拆出来进行维护，这里的拆可以是渐进的，先在项目维度进行拆分，防止过度拆分引起的后续维护问题.模块可以通过框架层面进行共享和注入。</p>\n<h3>模块之间的解耦(分层、共享)</h3>\n<p>代码不好维护有一定程度上跟模块的治理有关，模块间没有更好的做好分层，功能的拆分，就会导致业务逻辑分散，功能不聚合。\n在前端应用中，要思考业务、数据逻辑与视图逻辑的拆分</p>\n<h2>项目的规范(项目中的人)</h2>\n<p>项目中的规范是比较难实行的，比如设计到代码书写方式上的问题，不同人的理解真的很大不同，对于这部分应该要认可人之间的不同，在项目中建工具化的规范，通过工具去限制人的行为。比如lint 规范、大文件拆分、核心代码注释，尽可能通过框架去限制不合理的代码操作,这里举个例子比如项目中涉及到静态图片的展示，大图对用户的代码和体验都有损失，那么就可以通过编译时脚本来检查图片资源目录，当出现大图文件时中断编译或者通知。</p>\n<p>代码是与机器交互的语言,也是开发者之间交流的一种方式.之所以要提倡编写可维护的代码是希望在同一个团队中形成统一的方言.这种独特的方言要在一定程度上提高开发的效率(不好的方言有可能降低开发效率).也许团队这段时间会使用这种方言,过段时间会换另一种方言.自己的建议是多思考,多想想方言之间的不同,为什么这种模式会适应现在的场景,慢慢的你就会建立一种你自己的方言或者思考问题的方式.</p>\n<h2>参考</h2>\n<p><a href=\"https://juejin.im/post/5b3ae175f265da63252c2f21\">代码质量与规范，那些年你欠下的技术债</a><br>\n<a href=\"https://www.zhihu.com/question/20017545\">好的提高代码质量的方法有哪些</a><br>\n<a href=\"https://overreacted.io/zh-hans/goodbye-clean-code/\">Goodbye, Clean Code</a></p>","fields":{"readingTime":{"text":"5 min read"}},"frontmatter":{"title":"在聊维护项目的时候我们在聊什么","date":"2023-03-08","tags":"工程化","path":"/organize-code","top":null,"summary":null}}},{"node":{"id":"1a5c275d-51a1-5b48-a911-e35eefd0ce40","html":"<h2><a href=\"https://dev.to/codux/experiments-with-the-javascript-garbage-collector-2ae3\">Experiments with the JavaScript Garbage Collector</a></h2>\n<p>这篇文章通过一些demo例子来理解JavaScript的垃圾回收</p>\n<h2><a href=\"https://martinfowler.com/articles/modularizing-react-apps.html\">Modularizing React Applications with Established UI Patterns</a></h2>\n<p>模块化、业务逻辑与视图分离是构建可维护性强应用的一些基础方式，这篇文章通过例子来说明模块化、抽象化的过程。仔细阅读有收获</p>\n<h2><a href=\"https://deno.com/blog/you-dont-need-a-build-step\">You Don't Need a Build Step</a></h2>\n<p>这篇文章通过前端代码的编译引出<a href=\"https://fresh.deno.dev/\">fresh</a>这个框架，fresh支持实时的编译和转换，现在已经有10k+的star,值得关注</p>\n<h2><a href=\"https://betterprogramming.pub/all-javascript-and-typescript-features-of-the-last-3-years-629c57e73e42\">All JavaScript and TypeScript Features of the last 3 years</a></h2>\n<p>这篇文章介绍JavaScript和TypeScript最近三年的一些features,这里主要整理下avaScript的一些新features.\nES2020: <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Optional_chaining\">可选链</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing\">空值合并运算符</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled\">Promise.allSettled()</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/globalThis\">globalThis</a><br>\nES2021: <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll\">String.replaceAll()</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/any\">Promise.any</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_assignment\">逻辑空赋值</a><br>\nES2022: <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/await#%E5%9C%A8%E9%A1%B6%E5%B1%82%E4%BD%BF%E7%94%A8_await\">Top level await</a>、<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn\">hasOwn</a></p>\n<h2><a href=\"https://www.robinwieruch.de/react-starter/\">How to start a React Project in 2023</a></h2>\n<p>之前关于react项目的starter工具引发了一波讨论，这篇文章介绍了(Vite)[<a href=\"https://vitejs.dev/%5D%E3%80%81(Next)%5Bhttps://nextjs.org/%5D%E3%80%81\">https://vitejs.dev/]、(Next)[https://nextjs.org/]、</a><a href=\"https://astro.build/\">Astro</a>作为React项目初始化的优点和缺点</p>\n<h2><a href=\"https://react.dev/\">React</a></h2>\n<p>react最新的文档站点，文档在入门的介绍上和api的查看上相对之前的文档站都有一定的提升</p>\n<h2>工具</h2>\n<h2><a href=\"https://github.com/vadimdemedes/ink\">ink</a></h2>\n<p>一个可以在命令行中写React代码的工具库</p>\n<h2><a href=\"https://github.com/lucaong/minisearch\">MiniSearch</a></h2>\n<p>MiniSearch是一个实现搜索功能的库,他运行在内存中，有模糊搜索等能力，在博客的站点上试用了一下感觉还不错</p>\n<h2><a href=\"https://github.com/rogchap/v8go\">v8go</a></h2>\n<p>用Go语言执行javascript</p>\n<h2><a href=\"https://github.com/microsoft/playwright\">playwright</a></h2>\n<p>Playwright是一个微软出品的web测试和自动化工具，github上的star已经49k</p>","fields":{"readingTime":{"text":"2 min read"}},"frontmatter":{"title":"2023-3-1-前端快报","date":"2023-03-01","tags":"前端快报","path":"/2023-3-1","top":null,"summary":null}}},{"node":{"id":"e3ace596-3e3b-503f-9749-e050e7ba90aa","html":"<p>在聊关于价值的一点想法之前，请让我介绍一部我喜欢的电影作为引子-Once upon a time in America(美国往事)。我微信的昵称是noodles，也是因为这部电影。</p>\n<p>美国往事是一部讲述美国20世纪60年代生活的犯罪电影，主角noodles(面条)在街区中结识了一群小伙伴，最开始过着调皮捣蛋的快乐生活，随着新搬来的邻居Max(麦克斯)的到来，大家逐渐去做一些犯罪和帮派的活动，在剧情不断发展中，跟随noodles经历了童年的欢乐、青涩的爱情、友情、遗憾、无奈。在'生意'逐渐做大的时候，他们一伙人想要铤而走险，noodles为了挽救他们的生命，选择了举报他们的行动，结果行动被破坏但是伙伴们都死于那次举报。noodles抱着悔恨远走他乡。多年以后，一封信把noodles叫回了故乡，此时的noodles已经头发发白，岁月在他身上有了明显的痕迹。这次他遇到了之前痛而不得的爱人，也遇到了自己的老友-Max.原来Max在之前的行动中做了个局，在那次行动中，Max并没有死而noodles被迫远走之后，Max占据了大家一起打拼的事业，‘一帆风顺’当上了部长。Max此时已经无法自保，他想向noodles坦白自己之前做的事，让noodles了结他的生命。印象中深刻的台词就这里发生了，当Max坦白，noodles却不愿意拿枪杀死他，画面切回了之前他们一起经历的快乐时光。noodles说: it`s just the way i see things(这是我对人生的看法)，I hava a story alse(我也有一个关于你说的故事)。在noodles讲述的故事中他因为自己的举报导致挚友去世感到悔恨一生，但是他们之间有真挚的友谊。最后nodles走之间对Max说希望调查的结果没有问题，否则一生的忙碌到最后没有结果很遗憾。最后Max自杀，电影闪回了noodles去烟管吸烟的场景，最后电影定格在noodles的笑容中。</p>\n<p>最近看了好几遍电影的后面部分，还是有些理解不好nooldes最后的笑容，不过渐渐地理解noodles的: I hava a story alse(我也有一个关于你说的故事).也许人生的价值或者意义就在于我们的看法。同样的人生也会因为看法不同导致感受。</p>\n<p>----一个长的引子的分割线----</p>\n<h2>什么是价值</h2>\n<p>亚里士多德将生活分为三类：动物式的生活，政治的生活和沉思的生活。</p>\n<ul>\n<li>动物式的生活指受到动物本能的指引，在缺少理智的参与下，过着无节制的生活</li>\n<li>政治的生活指人具有社会属性，可以放弃一些动物的本能去追求荣誉、善</li>\n<li>沉思的生活指通过思考达到精神的愉悦状态</li>\n</ul>\n<p>我理解在对这三种生活划分的时候，是没有贬义的，因为我们都或多或少的因为生活的阶段、能力的限制在间插似的体验不同的生活。在这个过程中不可避免的会对我们做的事，过的生活进行思考。这里其实就引入了价值的思考。如果生活的最终目的是幸福，当然这个幸福是相对的主观的。也许一个人的幸福是到老了回忆起年轻的一个蠢事或者儿孙满堂或者家缠万贯，幸福的定义虽有不同却大致相似。那价值就是那些拓宽我们关于幸福定义的事。</p>\n<h2>追求价值的方式</h2>\n<p>在去年开始相对集中的阅读，因为觉得自己在好像还看不明白一些事也想不明白。最近在看张维迎《经济学原理》一书中引发了我对价值这个问题的思考。在经济学中有个概念叫-生产可能性边界，用来表示经济社会在既定资源和技术条件下所能生产的各种商品最大数量的组合。这里可以用这个边界来类比幸福的范围.那我们生活的目标就集中在如何扩大幸福的边界和范围了。<br>\n我想年龄的焦虑一个主要的原因可能是在可见的未来能预测到幸福的边界会收缩，比如职场的35岁年龄焦虑，认为在未来年龄不在具有竞争力，那幸福的面积就可预测的缩小了。所以我理解追求幸福其实就是个逐步的拓宽边界的行为。这个行为可以很简单，比如早起、多运动、多陪伴家人。也可以相对复杂，比如创办一个家乡企业、写一本有意思的书。也可以比较抽象，比如在夏天的时候做个清凉的白日梦、在冬天的时候听听雪。</p>\n<h2>价值的相对性</h2>\n<p>说到底人生经历的事情还是自己和最亲密的人一起经历的，那价值就有很强的主观性，如果一直想让自己适应社会的价值想法会一直处于比较较劲的状态。不过关于价值这个问题自己也没有想的特别明白，也希望自己能一直想想这个问题。也希望跟看到这里的你一起想好这个问题，也许当有天有人带着鄙夷的语气问你生活的价值和意义的时候，你会告诉他: I hava a story alse(我对人生有不同的看法)</p>","fields":{"readingTime":{"text":"8 min read"}},"frontmatter":{"title":"关于价值的一点想法","date":"2023-02-26","tags":"思考","path":"/thought-about-value","top":null,"summary":null}}}],"pathPrefix":"","first":false,"last":false,"index":3,"pageCount":16,"additionalContext":{"pageAllCount":91}}},
    "staticQueryHashes": []}